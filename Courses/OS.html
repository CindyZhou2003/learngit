
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Cindy的笔记本">
      
      
      
        <link rel="canonical" href="https://cindyzhou2003.github.io/mymkdocs/Courses/OS.html">
      
      
        <link rel="prev" href="PIS.html">
      
      
        <link rel="next" href="CN.html">
      
      
      <link rel="icon" href="../assets/images/favcion.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.12">
    
    
      
        <title>操作系统 - Cindy的笔记本</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e359304.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=LXGW+WenKai:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"LXGW WenKai";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css">
    
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lxgw-wenkai-screen-webfont@1.1.0/style.css">
    
      <link rel="stylesheet" href="../css/extra.css">
    
      <link rel="stylesheet" href="../css/neoteroi-mkdocs.css">
    
      <link rel="stylesheet" href="../css/style.css">
    
      <link rel="stylesheet" href="../css/font.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="forest" data-md-color-primary="teal" data-md-color-accent="teal">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#operating-system-concepts" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href=".." title="Cindy的笔记本" class="md-header__button md-logo" aria-label="Cindy的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Cindy的笔记本
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              操作系统
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="forest" data-md-color-primary="teal" data-md-color-accent="teal"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="forest-dark" data-md-color-primary="Brown" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/CindyZhou2003/mymkdocs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Cindy's notebook
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../index.html" class="md-tabs__link">
          
  
    
  
  主页🤖

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="DM.html" class="md-tabs__link">
          
  
    
  
  SE课程📝

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../skills/Algorithm.html" class="md-tabs__link">
          
  
    
  
  技能⚙️

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../other/IELTs.html" class="md-tabs__link">
          
  
    
  
  其他🎊

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../work/Interview.html" class="md-tabs__link">
          
  
    
  
  找工

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
  <!-- Add scripts that need to run before here -->
  
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Cindy的笔记本" class="md-nav__button md-logo" aria-label="Cindy的笔记本" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M96 0C43 0 0 43 0 96v320c0 53 43 96 96 96h320c17.7 0 32-14.3 32-32s-14.3-32-32-32v-64c17.7 0 32-14.3 32-32V32c0-17.7-14.3-32-32-32H96zm0 384h256v64H96c-17.7 0-32-14.3-32-32s14.3-32 32-32zm32-240c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16zm16 48h192c8.8 0 16 7.2 16 16s-7.2 16-16 16H144c-8.8 0-16-7.2-16-16s7.2-16 16-16z"/></svg>

    </a>
    Cindy的笔记本
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CindyZhou2003/mymkdocs" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Cindy's notebook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_1" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../index.html" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    主页🤖
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            主页🤖
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    SE课程📝
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            SE课程📝
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大一春夏
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            大一春夏
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DM.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    离散数学及其应用
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大二秋冬
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            大二秋冬
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="OOP.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    面向对象程序设计
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="FDS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据结构基础
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大二春夏
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            大二春夏
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ADS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    高级数据结构与算法分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="DB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据库系统
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="ML.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    机器学习（国际化）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="PIS.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    信息安全原理
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" checked>
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    大三秋冬
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            大三秋冬
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    操作系统
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="OS.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    操作系统
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      1 概述 Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 概述 Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 操作系统功能&amp;定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 计算机系统的运行
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2 计算机系统的运行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      中断 interrupt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 存储
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 计算机体系结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 操作系统结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-os-operations" class="md-nav__link">
    <span class="md-ellipsis">
      1.6 操作系统执行 OS operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.6 操作系统执行 OS operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-management" class="md-nav__link">
    <span class="md-ellipsis">
      Process management 进程管理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      Memory management内存管理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management" class="md-nav__link">
    <span class="md-ellipsis">
      File management 文件管理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-management" class="md-nav__link">
    <span class="md-ellipsis">
      Storage management 存储管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-purposes" class="md-nav__link">
    <span class="md-ellipsis">
      总结 OS purposes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-operating-system-structures" class="md-nav__link">
    <span class="md-ellipsis">
      2 结构 Operating-System Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 结构 Operating-System Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 操作系统服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-system-call" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 System call 系统调用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 System call 系统调用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      系统调用实现
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      参数传递
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      系统调用分类
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 系统程序
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 os设计和实现
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 操作系统结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 操作系统结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix" class="md-nav__link">
    <span class="md-ellipsis">
      UNIX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monolithic-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Monolithic System Structure 宏内核架构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microkernel-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Microkernel System Structure 微内核
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hybrid-structuredarwin" class="md-nav__link">
    <span class="md-ellipsis">
      Hybrid Structure——Darwin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layered-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Layered Approach 分层方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules 模块化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Other Structures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-virtual-machines" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 虚拟机 Virtual Machines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.6 虚拟机 Virtual Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hypervisor" class="md-nav__link">
    <span class="md-ellipsis">
      HyperVisor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 OS生成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-system-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 系统启动 System Boot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-processes" class="md-nav__link">
    <span class="md-ellipsis">
      3 进程 Processes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 进程 Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 进程概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 进程概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      Process state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-blockpcb" class="md-nav__link">
    <span class="md-ellipsis">
      Process control block(PCB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 进程调度 scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 进程调度 scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-scheduling-queues" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling Queues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span class="md-ellipsis">
      Schedulers 调度器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      Context Switch 上下文切换
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 进程操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 进程操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Process Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      Process Termination
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-cooperating" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 共同协作 cooperating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4 共同协作 cooperating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cooperating-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Cooperating Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-consumer" class="md-nav__link">
    <span class="md-ellipsis">
      Producer-consumer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 进程间通信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.5 进程间通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interprocess-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Interprocess Communication (IPC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Direct Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Indirect Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization 同步性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-communication-in-client-server-systems" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 Communication in Client-Server Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.6 Communication in Client-Server Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sockets" class="md-nav__link">
    <span class="md-ellipsis">
      Sockets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-threads" class="md-nav__link">
    <span class="md-ellipsis">
      4 线程 Threads
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 线程 Threads">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-and-multithreaded-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Single and Multithreaded Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benfits" class="md-nav__link">
    <span class="md-ellipsis">
      Benfits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-threads" class="md-nav__link">
    <span class="md-ellipsis">
      User Threads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel Threads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-multithreading-models" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Multithreading Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Threading Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Threading Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Cancellation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Signal Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-pools" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Pools 线程池
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-activations" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduler Activations 调度激活
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      5 调度 CPU Scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 调度 CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Basic concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 Basic concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispacher" class="md-nav__link">
    <span class="md-ellipsis">
      Dispacher
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 scheduling criteria
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 调度算法 scheduling algorithms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 调度算法 scheduling algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fcfsfirst-come-first-served" class="md-nav__link">
    <span class="md-ellipsis">
      FCFS(First-Come, First-Served)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sjfshortest-job-first" class="md-nav__link">
    <span class="md-ellipsis">
      SJF(Shortest-Job-First)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Priority Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highest-response-ratio-next-hrrn" class="md-nav__link">
    <span class="md-ellipsis">
      Highest Response Ratio Next （HRRN）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      Round Robin (RR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multilevel-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multilevel Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-feedback-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Feedback Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple-processor scheduling(了解)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Real-time scheduling(了解)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Thread scheduling(了解)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      Q
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-process-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      6 进程同步 Process synchronization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 进程同步 Process synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-background" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 背景 background
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 背景 background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Race condition 竞态条件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-critical-section-problem" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 临界区问题 critical-section problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 临界区问题 critical-section problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      解决方案 solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 同步机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.3 同步机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      软件方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      硬件方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-locks" class="md-nav__link">
    <span class="md-ellipsis">
      互斥锁 Mutex locks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      信号量方法 Semaphores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      管程方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      例子
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      题目
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7 死锁 Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 死锁 Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-the-deadlock-problem" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 The Deadlock Problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.1 The Deadlock Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      产生死锁的四个必要条件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-system-model" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 系统模型 System Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.2 系统模型 System Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-allocation-graph" class="md-nav__link">
    <span class="md-ellipsis">
      资源分配图 Resource-Allocation Graph
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-methods-for-handling-deadlocks" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 死锁处理方法 Methods for Handling Deadlocks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.3 死锁处理方法 Methods for Handling Deadlocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Prevention (预防)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Avoidance (避免)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Detection ( 检测 )
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#77-recovery-from-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7.7 Recovery from Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.7 Recovery from Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-preemption" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Preemption
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="CN.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    计算机网络
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="%E6%AF%9B%E6%A6%82.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    毛概
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="IoT.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    物联网
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    技能⚙️
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            技能⚙️
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../skills/Algorithm.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    算法
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../skills/deeplearning.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    深度学习
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    其他🎊
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            其他🎊
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other/IELTs.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IELTS
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../other/test.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    找工
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            找工
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../work/Interview.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    面试
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1-overview" class="md-nav__link">
    <span class="md-ellipsis">
      1 概述 Overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1 概述 Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11" class="md-nav__link">
    <span class="md-ellipsis">
      1.1 操作系统功能&amp;定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#12" class="md-nav__link">
    <span class="md-ellipsis">
      1.2 计算机系统的运行
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.2 计算机系统的运行">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interrupt" class="md-nav__link">
    <span class="md-ellipsis">
      中断 interrupt
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#13" class="md-nav__link">
    <span class="md-ellipsis">
      1.3 存储
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#14" class="md-nav__link">
    <span class="md-ellipsis">
      1.4 计算机体系结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#15" class="md-nav__link">
    <span class="md-ellipsis">
      1.5 操作系统结构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#16-os-operations" class="md-nav__link">
    <span class="md-ellipsis">
      1.6 操作系统执行 OS operations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1.6 操作系统执行 OS operations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-management" class="md-nav__link">
    <span class="md-ellipsis">
      Process management 进程管理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#memory-management" class="md-nav__link">
    <span class="md-ellipsis">
      Memory management内存管理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#file-management" class="md-nav__link">
    <span class="md-ellipsis">
      File management 文件管理
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-management" class="md-nav__link">
    <span class="md-ellipsis">
      Storage management 存储管理
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#os-purposes" class="md-nav__link">
    <span class="md-ellipsis">
      总结 OS purposes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-operating-system-structures" class="md-nav__link">
    <span class="md-ellipsis">
      2 结构 Operating-System Structures
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2 结构 Operating-System Structures">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21" class="md-nav__link">
    <span class="md-ellipsis">
      2.1 操作系统服务
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-system-call" class="md-nav__link">
    <span class="md-ellipsis">
      2.2 System call 系统调用
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.2 System call 系统调用">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      系统调用实现
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    <span class="md-ellipsis">
      参数传递
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    <span class="md-ellipsis">
      系统调用分类
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#23" class="md-nav__link">
    <span class="md-ellipsis">
      2.3 系统程序
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#24-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.4 os设计和实现
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#25" class="md-nav__link">
    <span class="md-ellipsis">
      2.5 操作系统结构
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.5 操作系统结构">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Simple Structure
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unix" class="md-nav__link">
    <span class="md-ellipsis">
      UNIX
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monolithic-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Monolithic System Structure 宏内核架构
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#microkernel-system-structure" class="md-nav__link">
    <span class="md-ellipsis">
      Microkernel System Structure 微内核
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hybrid-structuredarwin" class="md-nav__link">
    <span class="md-ellipsis">
      Hybrid Structure——Darwin
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#layered-approach" class="md-nav__link">
    <span class="md-ellipsis">
      Layered Approach 分层方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modules" class="md-nav__link">
    <span class="md-ellipsis">
      Modules 模块化
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#other-structures" class="md-nav__link">
    <span class="md-ellipsis">
      Other Structures
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#26-virtual-machines" class="md-nav__link">
    <span class="md-ellipsis">
      2.6 虚拟机 Virtual Machines
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2.6 虚拟机 Virtual Machines">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hypervisor" class="md-nav__link">
    <span class="md-ellipsis">
      HyperVisor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#27-os" class="md-nav__link">
    <span class="md-ellipsis">
      2.7 OS生成
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#28-system-boot" class="md-nav__link">
    <span class="md-ellipsis">
      2.8 系统启动 System Boot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-processes" class="md-nav__link">
    <span class="md-ellipsis">
      3 进程 Processes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 进程 Processes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 进程概念
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 进程概念">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    <span class="md-ellipsis">
      定义
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-state" class="md-nav__link">
    <span class="md-ellipsis">
      Process state
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-control-blockpcb" class="md-nav__link">
    <span class="md-ellipsis">
      Process control block(PCB)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 进程调度 scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 进程调度 scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-scheduling-queues" class="md-nav__link">
    <span class="md-ellipsis">
      Process Scheduling Queues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#schedulers" class="md-nav__link">
    <span class="md-ellipsis">
      Schedulers 调度器
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#context-switch" class="md-nav__link">
    <span class="md-ellipsis">
      Context Switch 上下文切换
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 进程操作
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 进程操作">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#process-creation" class="md-nav__link">
    <span class="md-ellipsis">
      Process Creation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#process-termination" class="md-nav__link">
    <span class="md-ellipsis">
      Process Termination
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#34-cooperating" class="md-nav__link">
    <span class="md-ellipsis">
      3.4 共同协作 cooperating
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.4 共同协作 cooperating">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cooperating-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Cooperating Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#producer-consumer" class="md-nav__link">
    <span class="md-ellipsis">
      Producer-consumer
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#35" class="md-nav__link">
    <span class="md-ellipsis">
      3.5 进程间通信
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.5 进程间通信">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#interprocess-communication-ipc" class="md-nav__link">
    <span class="md-ellipsis">
      Interprocess Communication (IPC)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#direct-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Direct Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#indirect-communication" class="md-nav__link">
    <span class="md-ellipsis">
      Indirect Communication
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      Synchronization 同步性
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#36-communication-in-client-server-systems" class="md-nav__link">
    <span class="md-ellipsis">
      3.6 Communication in Client-Server Systems
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.6 Communication in Client-Server Systems">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sockets" class="md-nav__link">
    <span class="md-ellipsis">
      Sockets
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-threads" class="md-nav__link">
    <span class="md-ellipsis">
      4 线程 Threads
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 线程 Threads">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 overview
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single-and-multithreaded-processes" class="md-nav__link">
    <span class="md-ellipsis">
      Single and Multithreaded Processes
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benfits" class="md-nav__link">
    <span class="md-ellipsis">
      Benfits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#user-threads" class="md-nav__link">
    <span class="md-ellipsis">
      User Threads
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kernel-threads" class="md-nav__link">
    <span class="md-ellipsis">
      Kernel Threads
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-multithreading-models" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Multithreading Models
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-threading-issues" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Threading Issues
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.3 Threading Issues">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#thread-cancellation" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Cancellation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#signal-handling" class="md-nav__link">
    <span class="md-ellipsis">
      Signal Handling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-pools" class="md-nav__link">
    <span class="md-ellipsis">
      Thread Pools 线程池
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#scheduler-activations" class="md-nav__link">
    <span class="md-ellipsis">
      Scheduler Activations 调度激活
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-cpu-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      5 调度 CPU Scheduling
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 调度 CPU Scheduling">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-basic-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Basic concepts
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.1 Basic concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cpu-scheduler" class="md-nav__link">
    <span class="md-ellipsis">
      CPU Scheduler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dispacher" class="md-nav__link">
    <span class="md-ellipsis">
      Dispacher
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-scheduling-criteria" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 scheduling criteria
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-scheduling-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 调度算法 scheduling algorithms
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 调度算法 scheduling algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fcfsfirst-come-first-served" class="md-nav__link">
    <span class="md-ellipsis">
      FCFS(First-Come, First-Served)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sjfshortest-job-first" class="md-nav__link">
    <span class="md-ellipsis">
      SJF(Shortest-Job-First)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#priority-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Priority Scheduling
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#highest-response-ratio-next-hrrn" class="md-nav__link">
    <span class="md-ellipsis">
      Highest Response Ratio Next （HRRN）
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#round-robin-rr" class="md-nav__link">
    <span class="md-ellipsis">
      Round Robin (RR)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multilevel-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multilevel Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-feedback-queue" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple Feedback Queue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-processor-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple-processor scheduling(了解)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Real-time scheduling(了解)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thread-scheduling" class="md-nav__link">
    <span class="md-ellipsis">
      Thread scheduling(了解)
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#q" class="md-nav__link">
    <span class="md-ellipsis">
      Q
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-process-synchronization" class="md-nav__link">
    <span class="md-ellipsis">
      6 进程同步 Process synchronization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 进程同步 Process synchronization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-background" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 背景 background
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1 背景 background">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#race-condition" class="md-nav__link">
    <span class="md-ellipsis">
      Race condition 竞态条件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#62-critical-section-problem" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 临界区问题 critical-section problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.2 临界区问题 critical-section problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solution" class="md-nav__link">
    <span class="md-ellipsis">
      解决方案 solution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#63" class="md-nav__link">
    <span class="md-ellipsis">
      6.3 同步机制
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.3 同步机制">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    <span class="md-ellipsis">
      软件方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    <span class="md-ellipsis">
      硬件方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutex-locks" class="md-nav__link">
    <span class="md-ellipsis">
      互斥锁 Mutex locks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#semaphores" class="md-nav__link">
    <span class="md-ellipsis">
      信号量方法 Semaphores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_13" class="md-nav__link">
    <span class="md-ellipsis">
      管程方法
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_15" class="md-nav__link">
    <span class="md-ellipsis">
      例子
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_16" class="md-nav__link">
    <span class="md-ellipsis">
      题目
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7 死锁 Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 死锁 Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-the-deadlock-problem" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 The Deadlock Problem
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.1 The Deadlock Problem">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_17" class="md-nav__link">
    <span class="md-ellipsis">
      产生死锁的四个必要条件
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-system-model" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 系统模型 System Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.2 系统模型 System Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-allocation-graph" class="md-nav__link">
    <span class="md-ellipsis">
      资源分配图 Resource-Allocation Graph
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#73-methods-for-handling-deadlocks" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 死锁处理方法 Methods for Handling Deadlocks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.3 死锁处理方法 Methods for Handling Deadlocks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deadlock-prevention" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Prevention (预防)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-avoidance" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Avoidance (避免)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deadlock-detection" class="md-nav__link">
    <span class="md-ellipsis">
      Deadlock Detection ( 检测 )
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#77-recovery-from-deadlock" class="md-nav__link">
    <span class="md-ellipsis">
      7.7 Recovery from Deadlock
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7.7 Recovery from Deadlock">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#resource-preemption" class="md-nav__link">
    <span class="md-ellipsis">
      Resource Preemption
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
  <!-- Add scripts that need to run afterwards here -->
  
    <script src="../js/toc.js" defer></script>
    <link rel="stylesheet" href="../css/fold_toc.css">
  

          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="operating-system-concepts">操作系统 Operating System Concepts<a class="headerlink" href="#operating-system-concepts" title="Permanent link">&para;</a></h1>
<div style="margin-top: -30px; font-size: 0.75em; opacity: 0.7;">
<p><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10h-2a8 8 0 0 1-8 8 8 8 0 0 1-8-8 8 8 0 0 1 8-8V2m6.78 1a.69.69 0 0 0-.48.2l-1.22 1.21 2.5 2.5L20.8 5.7c.26-.26.26-.7 0-.95L19.25 3.2c-.13-.13-.3-.2-.47-.2m-2.41 2.12L9 12.5V15h2.5l7.37-7.38-2.5-2.5Z"/></svg></span> 约 9381 个字 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3l89.3 89.4-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/></svg></span> 174 行代码 <span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20c4.42 0 8-3.58 8-8s-3.58-8-8-8-8 3.58-8 8 3.58 8 8 8m0-18c5.5 0 10 4.5 10 10s-4.5 10-10 10C6.47 22 2 17.5 2 12S6.5 2 12 2m.5 11H11V7h1.5v4.26l3.7-2.13.75 1.3L12.5 13Z"/></svg></span> 预计阅读时间 33 分钟</p>
</div>
<blockquote>
<p>[!NOTE]</p>
<p>LAB 0-7（5+15+15+15+20+20+10+10=110）</p>
</blockquote>
<h2 id="1-overview">1 概述 Overview<a class="headerlink" href="#1-overview" title="Permanent link">&para;</a></h2>
<h3 id="11">1.1 操作系统功能&amp;定义<a class="headerlink" href="#11" title="Permanent link">&para;</a></h3>
<p>从计算机角度，<strong>操作系统</strong>是个程序，管理电脑硬件</p>
<ul>
<li>resource allocator：分配资源（cpu、内存、I/O设备——硬件hardware 提供资源）</li>
<li>control program：防止资源滥用</li>
</ul>
<p><strong>定义</strong>：The operating system is the one program running at all times on the computer——namely kernel
操作系统是一直运行在计算机上的程序——通常称为内核</p>
<p>multi-user OS: Linux ubuntu</p>
<h3 id="12">1.2 计算机系统的运行<a class="headerlink" href="#12" title="Permanent link">&para;</a></h3>
<p>计算机= CPU + 多个设备控制器（I/O devices），通过公用总线相连，该总线提供了共享内存的访问</p>
<p>CPU和I/O设备可以并发执行（execute concurrently），并竞争访问内存，需要内存控制器协调访问内存</p>
<p>每个设备控制器 device controller</p>
<ul>
<li>控制特定的设备（磁盘驱动器、音频、视频显示..）</li>
<li>有本地缓冲区（local buffer），存储I/O</li>
<li>经系统总线system bus触发中断interrupt告知CPU已完成</li>
</ul>
<p>引导程序bootstrap program在开机power-up/reboot时加载</p>
<ul>
<li>到ROM/EPROM上（Read-only Memory是firmware固件）</li>
<li>初始化系统</li>
<li>bootstrap定位操作系统内核并加载到内存、开始执行</li>
</ul>
<h4 id="interrupt">中断 interrupt<a class="headerlink" href="#interrupt" title="Permanent link">&para;</a></h4>
<p>中断是</p>
<p>ISR中断服务例程interrupt service routine</p>
<p>中断向量interrupt vector：存储中断<em>例程</em>的地址 the addresses of all the service routines</p>
<ul>
<li>寄存器（Interrupt architecture）储存被中断<em>指令</em>的地址 </li>
</ul>
<p>有中断在处理时会停止其他未到的中断
Incoming interrupts are disabled while another interrupt is being processed to prevent a lost interrupt.</p>
<p>trap ：软件的中断，经常由错误或用户请求（又称 系统调用system call）导致</p>
<p><strong>操作系统是由中断驱动的 **
</strong>An operating system is interrupt-driven**</p>
<p>中断处理——一种软件例程处理</p>
<ol>
<li>恢复CPU状态——存寄存器&amp;程序计数器（program counter）
   - 计数器：存储下一条要执行的指令的位置</li>
<li>确定中断类型：polling by a generic routine or vectored interrupt system</li>
</ol>
<p>两种I/O处理方式：</p>
<ol>
<li>要等待，处理完传回——同步 synchronous</li>
<li>接收到（没做完）就传回——异步 asynchronous</li>
</ol>
<p><img src="../images/image-20240911152005368.png" alt="image-20240911152005368" style="zoom:50%;" /></p>
<p>DMA：直接内存访问</p>
<p><img src="../images/image-20240911152146945.png" alt="image-20240911152146945" style="zoom:50%;" /></p>
<p>每块只产生一个中断</p>
<h3 id="13">1.3 存储<a class="headerlink" href="#13" title="Permanent link">&para;</a></h3>
<p><img src="../images/image-20240911152243818.png" alt="image-20240911152243818" style="zoom:50%;" /></p>
<p>速度、花销、易失性</p>
<p>一级二级三级是按容量分的</p>
<p>高速缓存cache——更快的数据访问机制，主存可以认为是二级存储的最后一个cache</p>
<h3 id="14">1.4 计算机体系结构<a class="headerlink" href="#14" title="Permanent link">&para;</a></h3>
<p><strong>多处理器</strong> multiprocessing</p>
<ul>
<li>增加吞吐量</li>
<li>规模经济</li>
<li>增加可靠性</li>
</ul>
<p>对称多处理器 SMP symmetric multiprocessing：所有处理器对等、没有主从关系，共享内存</p>
<p>多核 multicore</p>
<ul>
<li>单片通信比芯片间通信快</li>
<li>多核电源消耗低</li>
</ul>
<p>非均匀内存访问 Non-uniform memory access(NUMA architecture)</p>
<ul>
<li>CPU通过一个共享系统连接</li>
<li>随着处理器的增加而更有效地扩展</li>
<li>跨互连的远程内存速度较慢</li>
<li>操作系统需要仔细的 CPU 调度和内存管理</li>
</ul>
<h3 id="15">1.5 操作系统结构<a class="headerlink" href="#15" title="Permanent link">&para;</a></h3>
<p><strong>Multiprogramming 多道程序设计</strong> needed for efficiency (<mark>CPU utilization</mark>)</p>
<ul>
<li>组织各项任务让CPU总有工作做</li>
<li>加载多项任务到内存</li>
<li>通过 job scheduling 安排选一个任务做</li>
<li>定义：在一个cpu上并发运行多个进程</li>
</ul>
<p><strong>Timesharing (multitasking)</strong> is logical extension in which CPU switches jobs so frequently that users can interact with each job while it is running, creating interactive computing (<mark>interactivity</mark>)</p>
<ul>
<li>响应速度足够快</li>
<li>多任务（进程 process）并发在CPU上执行 -&gt; CPU调度scheduling</li>
<li>如果一个进程不能全放入内存memory -&gt; 换入换出swapping（将没用的进程挪出）</li>
<li>虚存virtual memory：一种技术允许CPU执行不完全在内存的进程</li>
</ul>
<h3 id="16-os-operations">1.6 操作系统执行 OS operations<a class="headerlink" href="#16-os-operations" title="Permanent link">&para;</a></h3>
<blockquote>
<p>[!IMPORTANT]</p>
<p>Interrupt driven by hardware</p>
<p>Software error or request creates exception or trap</p>
<ul>
<li>Division by zero, request for operating system service</li>
</ul>
<p>Other process problems include infinite loop, processes modifying each other or the operating system</p>
</blockquote>
<p><strong>双模式dual-mode</strong> 操作允许操作系统保护自身和其他系统组件</p>
<ul>
<li>用户模式和内核模式 user mode &amp; kernel mode</li>
<li>硬件提供的模式位 mode bit</li>
<li>提供区分系统何时运行用户代码或内核代码的能力</li>
<li>一些指令被指定为特权privileged，只能在内核模式下执行</li>
<li>系统调用system call将模式更改为 kernel 模式，再通过系统调用回来将其重置为 user 模式</li>
</ul>
<p><img alt="image-20240914104446706" src="../images/image-20240914104446706.png" /></p>
<p><strong>Timer定时器</strong>：防止无限循环/进程占用资源</p>
<ul>
<li>在一段时间后中断进程 set interrupt</li>
<li>操作系统将计数器counter <code>-1</code>，<strong>到0产生中断</strong></li>
<li>在安排流程之前进行设置，以重新获得控制权或终止超过分配时间的程序</li>
</ul>
<h4 id="process-management">Process management 进程管理<a class="headerlink" href="#process-management" title="Permanent link">&para;</a></h4>
<p>程序是被动实体，进程是主动实体 active entity</p>
<ul>
<li>需要资源去执行</li>
<li>进程终止时将资源还给操作系统</li>
<li><strong>多线程进程Multi-threaded process</strong> 每个线程都有一个计数器</li>
<li><strong>多路复用multiplexing</strong>-&gt;实现并发concurrency</li>
</ul>
<p><img src="../images/image-20240914111333126.png" alt="image-20240914111333126" style="zoom:50%;" /></p>
<h4 id="memory-management">Memory management内存管理<a class="headerlink" href="#memory-management" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20240914110859245.png" style="zoom:50%;" /></p>
<h4 id="file-management">File management 文件管理<a class="headerlink" href="#file-management" title="Permanent link">&para;</a></h4>
<p>文件管理：创建、删除、加密</p>
<p><img src="../images/image-20240914111350634.png" alt="image-20240914111350634" style="zoom:50%;" /></p>
<h4 id="storage-management">Storage management 存储管理<a class="headerlink" href="#storage-management" title="Permanent link">&para;</a></h4>
<p>Mass-Storage Management</p>
<p><img src="../images/image-20240914111610391.png" alt="image-20240914111610391" style="zoom:40%;" /></p>
<p>I/O Subsystem 子系统</p>
<p><img src="../images/image-20240914112031690.png" alt="image-20240914112031690" style="zoom: 40%;" /></p>
<h3 id="os-purposes">总结 OS purposes<a class="headerlink" href="#os-purposes" title="Permanent link">&para;</a></h3>
<ul>
<li>Abstraction 抽象： a way to hide complexity</li>
<li>Multiplex 多路复用（空间、时间）</li>
<li>Isolation 隔离（用户/核模式）</li>
<li>Sharing 共享（用户、进程 资源共享-&gt;并发）</li>
<li>Security 安全（特权指令</li>
<li>Performance 性能</li>
<li>Range of uses</li>
</ul>
<h2 id="2-operating-system-structures">2 结构 Operating-System Structures<a class="headerlink" href="#2-operating-system-structures" title="Permanent link">&para;</a></h2>
<h3 id="21">2.1 操作系统服务<a class="headerlink" href="#21" title="Permanent link">&para;</a></h3>
<p>操作系统提供的服务有：</p>
<ul>
<li>UI(user interface)</li>
<li>CLI(command line)</li>
<li>
<p>优点：对重复性工作高效</p>
</li>
<li>
<p>GUI (Graphics User Interface)</p>
</li>
</ul>
<h3 id="22-system-call">2.2 System call 系统调用<a class="headerlink" href="#22-system-call" title="Permanent link">&para;</a></h3>
<h4 id="_1">系统调用实现<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h4>
<p>API（Application program interface)：被封装过high-level的系统调用</p>
<ul>
<li>Mostly accessed by programs via a high-level API rather than direct system call use 主要通过高级的API接触程序而不是直接的系统调用</li>
</ul>
<p>每个系统调用有个编号，通过系统调用表 table</p>
<p>系统调用发生时，程序控制权将交给内核来完成服务，服务完成后，控制权再还给程序（回到用户状态</p>
<p>系统调用是用户应用（软件）和硬件之间沟通的桥梁——保证了安全和有效的沟通 secure &amp; efficient</p>
<h4 id="_2">参数传递<a class="headerlink" href="#_2" title="Permanent link">&para;</a></h4>
<p>最简单：寄存器保存</p>
<p>间接方式：block、table、memory，把内存中buffer地址告诉寄存器（Linux &amp; Solaris）</p>
<p>其他：栈stack，不一定支持多用户</p>
<ul>
<li>block和stack方法不限制参数的数量或长度</li>
</ul>
<h4 id="_3">系统调用分类<a class="headerlink" href="#_3" title="Permanent link">&para;</a></h4>
<p>Process control 进程管理
File management 文件管理
Device management 设备管理
Information maintenance (e.g. time,date)信息维护
Communications 交流
Protection 保护</p>
<p><img src="../images/image-20240918150058573.png" alt="image-20240918150058573" style="zoom:50%;" /></p>
<h3 id="23">2.3 系统程序<a class="headerlink" href="#23" title="Permanent link">&para;</a></h3>
<p>分类：File manipulation、Status information、File modification、Programming language support、Program loading and execution、Communications、Application programs</p>
<p>.....debuggers</p>
<p>不是系统程序：web browsers、word processors（用户程序）</p>
<h3 id="24-os">2.4 os设计和实现<a class="headerlink" href="#24-os" title="Permanent link">&para;</a></h3>
<p>os设计和实现不是一个解决问题的过程（不是具体的问题而是创造性过程）</p>
<p>1.由目标和指标出发：用户目标、系统目标</p>
<p>2.被硬件和系统类型影响</p>
<p><strong>Policy</strong>:   What to do? 策略（确定具体做什么事，eg允许某些用户访问某些文件）
<strong>Mechanism</strong>:  How to do it? 机制（定义做事方式）</p>
<p>内存管理、cpu调度是机制？（算法是机制？</p>
<p>配置文件写的是策略（policy）</p>
<p><mark>Provide mechanism rather than policy</mark>. In particular, place user interface policy in the clients' hands. </p>
<h3 id="25">2.5 操作系统结构<a class="headerlink" href="#25" title="Permanent link">&para;</a></h3>
<h4 id="simple-structure">Simple Structure<a class="headerlink" href="#simple-structure" title="Permanent link">&para;</a></h4>
<p>MS-DOS: provide the most functionality in the least space</p>
<ul>
<li>不分模块，界面和多级功能间没有很好的分开</li>
</ul>
<h4 id="unix">UNIX<a class="headerlink" href="#unix" title="Permanent link">&para;</a></h4>
<p>UNIX – 受硬件功能限制，原始 UNIX 操作系统结构有限。UNIX 操作系统由两个可分离的部分组成</p>
<ul>
<li>系统程序</li>
<li>内核</li>
<li>包括系统调用接口以下和物理硬件以上的所有内容</li>
<li>提供文件系统、CPU 调度、内存管理和其他操作系统功能；一个级别的大量功能</li>
</ul>
<h4 id="monolithic-system-structure">Monolithic System Structure 宏内核架构<a class="headerlink" href="#monolithic-system-structure" title="Permanent link">&para;</a></h4>
<p>优点：</p>
<ul>
<li></li>
</ul>
<p>缺点：</p>
<ul>
<li></li>
</ul>
<p><strong>UNIX System Structure</strong> 宏内核</p>
<p><img src="../images/image-20240918154609215.png" alt="image-20240918154609215" style="zoom:50%;" /></p>
<h4 id="microkernel-system-structure">Microkernel System Structure 微内核<a class="headerlink" href="#microkernel-system-structure" title="Permanent link">&para;</a></h4>
<p>对应宏内核</p>
<p>将尽可能多的内容从内核移至“用户”空间，提供一小部分服务例如进程调度</p>
<p>用户模块之间使用消息传递进行通信 message passing</p>
<p>优点：</p>
<ul>
<li>更易于扩展 extend 微内核</li>
<li>更易于将操作系统移植 port 到新架构（flexibility）</li>
<li>更可靠（内核模式下运行的代码更少</li>
<li>更安全</li>
</ul>
<p>缺点：</p>
<ul>
<li>用户空间与内核空间通信的性能开销performance低（宏内核更高效）</li>
<li>系统服务、驱动程序的复杂性</li>
<li>上下文切换不太有效</li>
</ul>
<h4 id="hybrid-structuredarwin">Hybrid Structure——Darwin<a class="headerlink" href="#hybrid-structuredarwin" title="Permanent link">&para;</a></h4>
<p>混合模式：By ??</p>
<p>Windows, MacOS, iOS——混合内核</p>
<h4 id="layered-approach">Layered Approach 分层方法<a class="headerlink" href="#layered-approach" title="Permanent link">&para;</a></h4>
<p>操作系统分为多个层（级别），每层都建立在较低层之上。<strong>最底层（第0层）是硬件；最高层（第N层）是用户界面</strong>。
通过模块化 modularity ，可以选择各层，以便每层仅使用较低层的功能（操作）和服务</p>
<p>逻辑分层：</p>
<p><img src="../images/image-20240923104411850.png" alt="image-20240923104411850" style="zoom: 33%;" /></p>
<p>逐层调用（不能跨层调用）、逐层封装——层之间通讯的效率问题</p>
<p>优点：</p>
<p>缺点：require more overhead for iter-layer communication</p>
<h4 id="modules">Modules 模块化<a class="headerlink" href="#modules" title="Permanent link">&para;</a></h4>
<p>和分层相似但更灵活、可拓展性 scal，但有模块兼容性问题</p>
<ul>
<li>使用目标导向的方法</li>
<li>每个模块再需要时可以加载到内核中（loadable）</li>
<li>每个模块核心组件隔离</li>
<li>模块相互调用（通过已知的接口）而不是消息传递</li>
</ul>
<p>LKMs(loadable kernel modules): extend the functionality of the kernel dynamically</p>
<p>优点：</p>
<p>缺点：</p>
<h4 id="other-structures">Other Structures<a class="headerlink" href="#other-structures" title="Permanent link">&para;</a></h4>
<p><strong>Exokernel 外核</strong> (1994)：高度简化kernel，只负责资源分配，提供了低级的硬件操作，必须通过定制library供应用使用
高性能，但定制化library难度大，兼容性差</p>
<p>Unikernel: statically linked with the OS code needed.Good for cloud service, APP boots in tens of ms.</p>
<h3 id="26-virtual-machines">2.6 虚拟机 Virtual Machines<a class="headerlink" href="#26-virtual-machines" title="Permanent link">&para;</a></h3>
<p>A virtual machine takes the layered approach to its logical conclusion.  It treats <em>hardware and the operating system kernel</em> as though they were all <strong>hardware</strong> 都看作硬件</p>
<p>A virtual machine provides an interface identical to the underlying bare hardware</p>
<p>The operating system creates the illusion of multiple processes, each executing on its own processor with its own (virtual) memory</p>
<h4 id="hypervisor">HyperVisor<a class="headerlink" href="#hypervisor" title="Permanent link">&para;</a></h4>
<p>TYPE1 Bare-Metal 裸金属 architecture</p>
<ul>
<li>更高的性能、和硬件直接接触、安全性更高</li>
</ul>
<p>TYPE2 Hosted 宿主 需要hostOS，eg VMware、Oracle</p>
<ul>
<li>应用简单、和现有OS兼容性高、适合测试和开发环境</li>
</ul>
<p>选2不选1的常见原因：easier integration with existing host OS</p>
<p><img src="../images/image-20240923111559930.png" alt="image-20240923111559930" style="zoom:50%;" /></p>
<p>三种技术：</p>
<p>VM：更好的隔离性、灵活性，有资源消耗（复杂）的问题</p>
<p>LC：更加轻量级，不需要加载内核os（docker）</p>
<p>Uk：所有东西都打包，只能允许一个app运行</p>
<h3 id="27-os">2.7 OS生成<a class="headerlink" href="#27-os" title="Permanent link">&para;</a></h3>
<h3 id="28-system-boot">2.8 系统启动 System Boot<a class="headerlink" href="#28-system-boot" title="Permanent link">&para;</a></h3>
<h2 id="3-processes">3 进程 Processes<a class="headerlink" href="#3-processes" title="Permanent link">&para;</a></h2>
<h3 id="31">3.1 进程概念<a class="headerlink" href="#31" title="Permanent link">&para;</a></h3>
<p>An operating system executes a variety of programs:</p>
<ul>
<li>Batch system – a batch is a sequence of jobs</li>
<li>Time-sharing systems – user programs or tasks</li>
<li>Multitasking</li>
<li>Less turnaround, less CPU idle, user interaction</li>
</ul>
<blockquote>
<p>[!NOTE]</p>
<p>Textbook uses the terms <em>job</em> and <em>process</em> almost interchangeably</p>
</blockquote>
<h4 id="_4">定义<a class="headerlink" href="#_4" title="Permanent link">&para;</a></h4>
<p>进程是运行中的程序，按照指令流顺序进行</p>
<p>一个进程包含</p>
<ul>
<li>text section (code)</li>
<li>data section (global vars)</li>
<li>stack (function parameters, local vars, return addresses)</li>
<li>heap (dynamically allocated memory)</li>
<li>program counter </li>
</ul>
<p><img src="../images/image-20240923112853058.png" alt="image-20240923112853058" style="zoom:33%;" />stack和heap相对而生：灵活应用内存空间</p>
<h4 id="process-state">Process state<a class="headerlink" href="#process-state" title="Permanent link">&para;</a></h4>
<ul>
<li>new</li>
<li>running</li>
<li>ready：等待被分配给一个处理器 processor（已经被加载进内存memory</li>
<li>waiting/block</li>
<li>terminated：结束进程</li>
</ul>
<p><img src="../images/image-20240923113548425.png" alt="image-20240923113548425" style="zoom: 33%;" /></p>
<h4 id="process-control-blockpcb">Process control block(PCB)<a class="headerlink" href="#process-control-blockpcb" title="Permanent link">&para;</a></h4>
<ul>
<li>
<p>OS数据结构，用来跟踪进程和相关资源</p>
</li>
<li>
<p>记录 进程状态、PC、寄存器值、CPU调度、内存管理信息、accounting信息、I/O信息</p>
</li>
<li>Process ID 是进程的独特编号</li>
<li>PCB中的PC是记录程序目前正在运行的位置</li>
</ul>
<p><img src="../images/image-20240925150055065.png" alt="image-20240925150055065" style="zoom: 33%;" /></p>
<p><a href="# Context Switch 上下文切换">Context Switch上下文切换</a>的overhead</p>
<blockquote>
<p>分配设备不需要创建新进程</p>
<p>用户登录成功、启动程序执行需要创建新进程</p>
</blockquote>
<h3 id="32-scheduling">3.2 进程调度 scheduling<a class="headerlink" href="#32-scheduling" title="Permanent link">&para;</a></h3>
<h4 id="process-scheduling-queues">Process Scheduling Queues<a class="headerlink" href="#process-scheduling-queues" title="Permanent link">&para;</a></h4>
<p>CPU Switch From Process to Process</p>
<p><strong>Job queue</strong> – set of all processes in the system（包括ready和正在执行的</p>
<p><strong>Ready queue</strong> – set of all processes residing in <em>main memory</em>, ready and waiting to execute（等待CPU</p>
<p><strong>Device queues</strong> – set of processes waiting for an I/O device 有很多设备（申请使用device——通过系统调用</p>
<p>Processes migrate among the various queues</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p>一个PCB能不能在两个队列（device&amp;ready）里同时排队？- 不可能</p>
</blockquote>
<p><img src="../images/image-20240925152502875.png" alt="image-20240925152502875" style="zoom: 33%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>我们是把PCB放到进程队列里；</p>
<p>CPU有四个核可以有4个队列，也可以只有1个队列</p>
</blockquote>
<h4 id="schedulers">Schedulers 调度器<a class="headerlink" href="#schedulers" title="Permanent link">&para;</a></h4>
<p><mark>调度器是程序的一部分，A scheduler is a piece of program</mark></p>
<p><strong>Long-term scheduler</strong>  (or job scheduler) – selects which processes should be brought into memory (the ready queue) </p>
<p>长期调度控制多道程序设计(并发) degree of multiprogramming</p>
<p><strong>Short-term scheduler</strong>  (or CPU scheduler) – selects which process should be executed next and allocates CPU</p>
<ul>
<li>The long-term scheduler is invoked very infrequently (seconds, minutes) =&gt; (may be slow)</li>
<li>The short-term scheduler is invoked very frequently (milliseconds) =&gt; (must be fast)</li>
</ul>
<p><strong>Medium Term Scheduling</strong>：进程在内存和磁盘间交换 swap in and out</p>
<blockquote>
<p>[!WARNING]</p>
<p>UNIX and Windows do not use long-term scheduling</p>
</blockquote>
<p>交换运行程序到磁盘（....？</p>
<p><img src="../images/image-20240925153235578.png" alt="image-20240925153235578" style="zoom:33%;" /></p>
<p>Processes can be described as either:</p>
<ul>
<li>
<p><strong>I/O-bound process</strong> I/O绑定进程 – spends more time doing I/O than computations, many short CPU bursts，eg：下载</p>
</li>
<li>
<p><strong>CPU-bound process</strong> CPU绑定进程 – spends more time doing computations; few very long CPU bursts，eg：科学计算</p>
</li>
</ul>
<h4 id="context-switch">Context Switch 上下文切换<a class="headerlink" href="#context-switch" title="Permanent link">&para;</a></h4>
<p>当CPU切换到另一个进程时，系统必须保存旧进程的状态，并为新进程加载保存的状态</p>
<p>上下文切换的时间是开销 overhead；系统在切换时没有任何有用的工作，通常需要几毫秒</p>
<p>时间取决于硬件支持；在SPARC架构中，提供了寄存器组</p>
<ul>
<li>上下文切换时PCB不必记录进程优先级，优先级是内核kernel判断的</li>
</ul>
<h3 id="33">3.3 进程操作<a class="headerlink" href="#33" title="Permanent link">&para;</a></h3>
<h4 id="process-creation">Process Creation<a class="headerlink" href="#process-creation" title="Permanent link">&para;</a></h4>
<p>父进程创造子进程 fork</p>
<ul>
<li>
<p>Resource sharing</p>
</li>
<li>
<p>Parent and children share all resources</p>
</li>
<li>
<p>Children share subset of parent’s resources</p>
</li>
<li>
<p>Parent and child share no resources</p>
</li>
<li>
<p>Execution</p>
</li>
<li>
<p>Parent and children execute concurrently</p>
</li>
<li>Parent waits until children terminate</li>
<li>Address space</li>
<li>Child duplicate of parent</li>
<li>
<p>Child <em>has a program loaded into it</em></p>
</li>
<li>
<p>UNIX examples</p>
</li>
<li><strong>fork</strong> system call creates new process</li>
<li><strong>exec</strong> system call used after a fork to replace the process's memory space with a new program</li>
</ul>
<blockquote>
<p>父进程和子进程可以并发执行</p>
<p>父进程和子进程有各自的空间，不共享虚拟地址</p>
<p>父进程和子进程有不同的进程控制块（PCB）-&gt; 隔离</p>
<p>父进程和子进程不能同时使用</p>
</blockquote>
<p><img src="../images/image-20240930103721294.png" alt="image-20240930103721294" style="zoom:30%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>子进程可以<strong>继承</strong>父进程的内容；
需要重置 pid，cpu time，优先级，堆栈</p>
<p>list of open files？？</p>
</blockquote>
<p>OS不是真的copy，显式copy</p>
<blockquote>
<p>[!CAUTION]</p>
<p>创造进程的新线程不是通过fork</p>
</blockquote>
<h4 id="process-termination">Process Termination<a class="headerlink" href="#process-termination" title="Permanent link">&para;</a></h4>
<h3 id="34-cooperating">3.4 共同协作 cooperating<a class="headerlink" href="#34-cooperating" title="Permanent link">&para;</a></h3>
<h4 id="cooperating-processes">Cooperating Processes<a class="headerlink" href="#cooperating-processes" title="Permanent link">&para;</a></h4>
<p><strong>Independent</strong> process 独立进程 cannot affect or be affected by the execution of another process</p>
<p><strong>Cooperating</strong> process can affect or be affected by the execution of another process</p>
<p><em>Advantages</em> of process cooperation:</p>
<ul>
<li>Information sharing</li>
<li>Computation speed-up (Multiple CPUs)</li>
<li>Modularity</li>
<li>Convenience</li>
</ul>
<h4 id="producer-consumer">Producer-consumer<a class="headerlink" href="#producer-consumer" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20240930110501365.png" alt="image-20240930110501365" style="zoom:40%;" /></p>
<p>主要目的是在生产者线程和消费者线程之间进行数据的<strong>同步</strong>操作</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1">//Shared data</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="cp">#define BUFFER_SIZE 10</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="p">.</span><span class="w"> </span><span class="p">.</span><span class="w"> </span><span class="p">.</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="p">}</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">item</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">BUFFER_SIZE</span><span class="p">];</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="kt">int</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="c1">//Bounded-Buffer – Insert() Method</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a><span class="c1">//Producer pseudo-code:</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">    </span><span class="n">Produce</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(((</span><span class="n">in</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="w">   </span><span class="o">==</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="cm">/* do nothing -- no free buffers */</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">    </span><span class="n">buffer</span><span class="p">[</span><span class="n">in</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a><span class="w">    </span><span class="n">in</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER_SIZE</span><span class="p">;</span>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="p">}</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="c1">//Bounded Buffer – Remove() Method</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="c1">//Consumer pseudo-code:</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">in</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">out</span><span class="p">);</span><span class="w"> </span><span class="c1">//do nothing, nothing to consume</span>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a><span class="w">    </span><span class="n">Remove</span><span class="w"> </span><span class="n">an</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="n">from</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">buffer</span><span class="p">;</span>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">    </span><span class="n">item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">[</span><span class="n">out</span><span class="p">];</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">    </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">out</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">BUFFER</span><span class="w"> </span><span class="n">SIZE</span><span class="p">;</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">item</span><span class="p">;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="p">}</span>
</code></pre></div>
<blockquote>
<p>How many items？</p>
<ul>
<li>(in-out) % BUFFER_SIZE</li>
<li>或者加一个变量count</li>
</ul>
</blockquote>
<h3 id="35">3.5 进程间通信<a class="headerlink" href="#35" title="Permanent link">&para;</a></h3>
<h4 id="interprocess-communication-ipc">Interprocess Communication (IPC)<a class="headerlink" href="#interprocess-communication-ipc" title="Permanent link">&para;</a></h4>
<p>Two models for IPC: <strong>message passing</strong>消息队列 and <strong>shared memory</strong>共享内存</p>
<p>通信模型：</p>
<p><img src="../images/image-20240930111506403.png" alt="image-20240930111506403" style="zoom: 33%;" /></p>
<p>共享内存的主要优点：数据一致性</p>
<p>In IPC, minimize shared resources can reduce conflicts</p>
<h4 id="direct-communication">Direct Communication<a class="headerlink" href="#direct-communication" title="Permanent link">&para;</a></h4>
<p>explictly显式的</p>
<p>A link is associated with exactly one pair of communicating processes</p>
<p>Between each pair there exists exactly one link</p>
<h4 id="indirect-communication">Indirect Communication<a class="headerlink" href="#indirect-communication" title="Permanent link">&para;</a></h4>
<p>mailbox(ports)——both synchronous and asynchronous communication</p>
<p>A link may be associated with many processes</p>
<p>Each pair of processes may share several communication links</p>
<h4 id="synchronization">Synchronization 同步性<a class="headerlink" href="#synchronization" title="Permanent link">&para;</a></h4>
<p>send 是一个系统调用</p>
<p><strong>Blocking</strong> is considered <strong>synchronous</strong></p>
<ul>
<li>Blocking send has the sender blocked until the message is received</li>
<li>Blocking receive has the receiver block until a message is available</li>
</ul>
<p><strong>Non-blocking</strong> is considered <strong>asynchronous</strong></p>
<ul>
<li>Non-blocking send has the sender send the message and continue</li>
<li>Non-blocking receive has the receiver receive a valid message or null</li>
</ul>
<h3 id="36-communication-in-client-server-systems">3.6 Communication in Client-Server Systems<a class="headerlink" href="#36-communication-in-client-server-systems" title="Permanent link">&para;</a></h3>
<h4 id="sockets">Sockets<a class="headerlink" href="#sockets" title="Permanent link">&para;</a></h4>
<h2 id="4-threads">4 线程 Threads<a class="headerlink" href="#4-threads" title="Permanent link">&para;</a></h2>
<h3 id="41-overview">4.1 overview<a class="headerlink" href="#41-overview" title="Permanent link">&para;</a></h3>
<p>程序内部隔离和调度</p>
<h4 id="single-and-multithreaded-processes">Single and Multithreaded Processes<a class="headerlink" href="#single-and-multithreaded-processes" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241009150251297.png" alt="image-20241009150251297" style="zoom: 33%;" /></p>
<p>cpu调度的最小（基本）单位：线程 thread</p>
<p>资源分配的最小（基本）单位：进程 process</p>
<h5 id="_5">进程和线程的区别<a class="headerlink" href="#_5" title="Permanent link">&para;</a></h5>
<p><img src="../images/cb8c649311628903e2240ebd3e73873.jpg" alt="cb8c649311628903e2240ebd3e73873" style="zoom:50%;" /></p>
<h4 id="benfits">Benfits<a class="headerlink" href="#benfits" title="Permanent link">&para;</a></h4>
<p>Responsiveness：interactive applications</p>
<p>Resource Sharing：memory for code and data can be shared.</p>
<p>Economy：creating processes are more expensive.</p>
<p>Utilization of MP Architectures 多处理器架构：multi-threading increases concurrency 可拓展性</p>
<h4 id="user-threads">User Threads<a class="headerlink" href="#user-threads" title="Permanent link">&para;</a></h4>
<p>Thread management done by user-level threads library</p>
<p>Three primary thread libraries: POSIX Pthreads (can also be provided as system library) ，Win32 threads， Java threads —— 都可能会产生？？？</p>
<p>一个用户级线程只能映射到一个内核级线程</p>
<p>对于用户级线程，内核并不知情</p>
<h4 id="kernel-threads">Kernel Threads<a class="headerlink" href="#kernel-threads" title="Permanent link">&para;</a></h4>
<p>Almost all contemporary OS implements kernel threads.</p>
<p>Kernel level threads：支持调度，便于线程切换，避免阻塞；执行的载体</p>
<p>User level threads：；逻辑的载体</p>
<p>内核级线程所需要的资源是以进程为单位申请的</p>
<blockquote>
<p>用户级线程的切换通过线程库，不需要内核的支持，即线程库为用户级线程建立一个线程控制块</p>
<p>内核级（系统级）线程的调度由操作系统完成</p>
<p>用户级线程间的切换比内核级切换效率高</p>
<p>用户级线程可以在不支持内核级线程的操作系统上实现</p>
<p>[!NOTE]</p>
<p>多线程的特长：提高并发性，例如矩阵乘法、web服务器响应HTTP</p>
<p>多线程不共享栈指针</p>
<p>同一进程中的各个线程有相同的地址单位</p>
</blockquote>
<h3 id="42-multithreading-models">4.2 Multithreading Models<a class="headerlink" href="#42-multithreading-models" title="Permanent link">&para;</a></h3>
<h5 id="many-to-one-model">Many-to-one Model<a class="headerlink" href="#many-to-one-model" title="Permanent link">&para;</a></h5>
<p>一个用户级线程卡住了，整个进程就卡住了</p>
<p>thread management is efficient, but will block if making system call, kernel can schedule only one thread at a time</p>
<p><img src="../images/image-20241009152351978.png" alt="image-20241009152351978" style="zoom:30%;" /></p>
<blockquote>
<p>Q：某个分时系统采用<strong>多对一</strong>线程模型。内存中有10个进程并发运行，其中9个进程中只有一个线程，另外一个进程A拥有11个线程。则A获得的CPU时间占总时间的 1/10</p>
</blockquote>
<h5 id="one-to-one">One-to-one<a class="headerlink" href="#one-to-one" title="Permanent link">&para;</a></h5>
<p>Each user-level thread maps to kernel thread</p>
<p>more concurrency, but creating thread is expensive</p>
<p>能让线程并行，每个用户级线程都有一个内核级线程</p>
<blockquote>
<p>Q：某个分时系统采用<strong>一对一</strong>线程模型。内存中有10个进程并发运行，其中9个进程中只有一个线程，另外一个进程A拥有11个线程。则A获得的CPU时间占总时间的 11/20</p>
</blockquote>
<h5 id="many-to-many-model">Many-to-Many Model<a class="headerlink" href="#many-to-many-model" title="Permanent link">&para;</a></h5>
<p>flexible，LWP ID kernel根据情况看调度</p>
<p>Allows many user level threads to be mapped to many kernel threads</p>
<p>Allows the operating system to create a sufficient number of kernel threads</p>
<h5 id="two-level-model">Two-level Model<a class="headerlink" href="#two-level-model" title="Permanent link">&para;</a></h5>
<p>Similar to M:M, except that it allows a user thread to be bound to kernel thread</p>
<h3 id="43-threading-issues">4.3 Threading Issues<a class="headerlink" href="#43-threading-issues" title="Permanent link">&para;</a></h3>
<p>Semantics语义 of fork() and exec(）</p>
<blockquote>
<p>Does fork() duplicate only the calling thread or all threads?</p>
<ul>
<li>
<p>Some unix systems have two versions of fork(), one that <strong>duplicates all threads</strong> and another that <strong>duplicates the thread</strong> that invokes fork().</p>
</li>
<li>
<p>Exec() will replace the entire process.</p>
</li>
</ul>
</blockquote>
<h4 id="thread-cancellation">Thread Cancellation<a class="headerlink" href="#thread-cancellation" title="Permanent link">&para;</a></h4>
<p><strong>Asynchronous cancellation</strong>异步 terminates the target thread  immediately</p>
<p><strong>Deferred cancellation</strong>延后 allows the target thread to periodically check via a flag if it should be cancelled</p>
<h4 id="signal-handling">Signal Handling<a class="headerlink" href="#signal-handling" title="Permanent link">&para;</a></h4>
<p>A <strong>signal handler</strong> is used to process signals, either synchronous or asynchronous:</p>
<ul>
<li>Signal is generated by particular event</li>
<li>Signal is delivered to a process</li>
<li>Signal is handled</li>
</ul>
<h4 id="thread-pools">Thread Pools 线程池<a class="headerlink" href="#thread-pools" title="Permanent link">&para;</a></h4>
<p>Create a number of threads in a pool where they await work</p>
<p>Advantages</p>
<ul>
<li>Usually slightly faster to service a request with an existing thread than create a new thread</li>
<li>Allows the number of threads in the application(s) to be bound to the size of the pool</li>
</ul>
<p><strong>Thread-Local Storage（TLS）</strong>：Allows each thread to have its own copy of data</p>
<h4 id="scheduler-activations">Scheduler Activations 调度激活<a class="headerlink" href="#scheduler-activations" title="Permanent link">&para;</a></h4>
<p>LWP is a virtual processor attached to kernel thread</p>
<p>Scheduler activations provide <strong>upcalls</strong> - a communication mechanism from the kernel to the thread library</p>
<p>Upcalls are handled by the thread library with an <strong>upcall handler</strong>.</p>
<p>This communication allows an application to maintain the correct number of kernel threads</p>
<p>When an application thread is about to block, an upcall is triggered.</p>
<h2 id="5-cpu-scheduling">5 调度 CPU Scheduling<a class="headerlink" href="#5-cpu-scheduling" title="Permanent link">&para;</a></h2>
<h3 id="51-basic-concepts">5.1 Basic concepts<a class="headerlink" href="#51-basic-concepts" title="Permanent link">&para;</a></h3>
<p>scheduler dispatch</p>
<p>调度资源？CPU</p>
<p>调度目标？Processes/threads</p>
<p><mark>Goal: 在multiprogramming下CPU使用率最大化</mark></p>
<p><img src="../images/image-20241014100337138.png" alt="image-20241014100337138" style="zoom:33%;" /></p>
<p>CPU-I/O Burst Cycle：Process execution consists of a cycle of CPU execution and I/O wait</p>
<p>进程实际运行时CPU占用时间少，I/O多</p>
<p>大部分CPU burst时间非常短</p>
<h4 id="cpu-scheduler">CPU Scheduler<a class="headerlink" href="#cpu-scheduler" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241014100627801.png" alt="image-20241014100627801" style="zoom:50%;" /></p>
<p>nonpreemptive 非抢占式调度 1 &amp; 4</p>
<p>preemptive ✔️ 2 &amp; 3</p>
<h4 id="dispacher">Dispacher<a class="headerlink" href="#dispacher" title="Permanent link">&para;</a></h4>
<p>dispacher latency：P1停止运行到P1运行</p>
<p><img src="../images/image-20241014100422820.png" alt="image-20241014100422820" style="zoom:33%;" /></p>
<h3 id="52-scheduling-criteria">5.2 scheduling criteria<a class="headerlink" href="#52-scheduling-criteria" title="Permanent link">&para;</a></h3>
<p>CPU utilization CPU利用率：<strong>CPU 使用率= (1 - 空闲态运行时间/总运行时间) * 100%</strong></p>
<p>Throughtput 吞吐率：<strong>进程数/总执行时间</strong></p>
<p>Turnaround time 周转时间 进程提交到结束</p>
<p>waiting time 等待时间</p>
<p>response time 响应时间</p>
<p><img src="../images/image-20241014100514354.png" alt="image-20241014100514354" style="zoom:50%;" /></p>
<h3 id="53-scheduling-algorithms">5.3 调度算法 scheduling algorithms<a class="headerlink" href="#53-scheduling-algorithms" title="Permanent link">&para;</a></h3>
<h4 id="fcfsfirst-come-first-served">FCFS(First-Come, First-Served)<a class="headerlink" href="#fcfsfirst-come-first-served" title="Permanent link">&para;</a></h4>
<p>先来先服务算法</p>
<p><img src="../images/image-20241014100837396.png" alt="image-20241014100837396" style="zoom:50%;" /></p>
<p><img src="../images/image-20241014100934593.png" alt="image-20241014100934593" style="zoom:50%;" /></p>
<blockquote>
<p>[!IMPORTANT]</p>
<p>Arrival order makes a difference!
到达顺序很重要</p>
</blockquote>
<ul>
<li>FCFS是<strong>非抢占式</strong>算法</li>
<li>FCFS简单、公平</li>
<li><strong>Convoy effect</strong>（护航效应）: short process behind long process, the average waiting time may be longer, leading to I/O devices &amp; CPU being idle</li>
</ul>
<p><strong>有利于长作业，不利于短作业；有利于CPU繁忙型，不利于I/O繁忙型</strong></p>
<blockquote>
<p>短作业位于长作业后时调度时间要很长；I/O繁忙会有很多waiting，不断排队到ready queue队尾，如果排到长作业后面就要很长时间</p>
</blockquote>
<h4 id="sjfshortest-job-first">SJF(Shortest-Job-First)<a class="headerlink" href="#sjfshortest-job-first" title="Permanent link">&para;</a></h4>
<p>短作业优先算法</p>
<ul>
<li>
<p>SJF is a priority scheduling where priority is the predicted next CPU burst time</p>
</li>
<li>
<p>SJF既可以是抢占式也可以是非抢占式</p>
</li>
<li>nonpreemptive – once CPU given to the process it cannot be preempted until completes its CPU burst</li>
<li>preemptive – if a new process arrives with CPU burst length less than remaining time of current executing process, preempt. This scheme is known as the <strong>Shortest-Remaining-TimeFirst (SRTF)</strong>最短剩余时间调度算法</li>
<li>SJF is <strong>optimal</strong> – gives <strong>minimum average waiting time</strong> for a given set of processes</li>
<li>Which is better? Preemptive? Nonpreemptive? 不确定，要根据到达时间和cpu burst确定</li>
<li>Starvation 饥饿问题，优先级低的进程一直无法运行，短作业都会发生</li>
<li>Not good for long process 不适合长进程，因为优先调度cpu burst最短的进程</li>
</ul>
<h5 id="nonpreemptive">nonpreemptive<a class="headerlink" href="#nonpreemptive" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241014103433736.png" alt="image-20241014103433736" style="zoom:50%;" /></p>
<h5 id="preemptive">preemptive<a class="headerlink" href="#preemptive" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241014104442138.png" alt="image-20241014104442138" style="zoom:50%;" /></p>
<h4 id="priority-scheduling">Priority Scheduling<a class="headerlink" href="#priority-scheduling" title="Permanent link">&para;</a></h4>
<p>优先级调度算法</p>
<p>The CPU is allocated to the process with the highest priority (smallest integer means highest priority)</p>
<ul>
<li>
<p>Preemptive</p>
</li>
<li>
<p>nonpreemptive</p>
</li>
</ul>
<p><strong>Static Priority</strong>: determine when processes is created; do not change 静态优先</p>
<p>Problem：<strong>Starvation</strong> – low priority processes may never execute</p>
<p>Solution：<strong>Aging</strong> （老化）– as time progresses increase the priority of the process——<strong>Dynamic Priority</strong> 提高优先级</p>
<h4 id="highest-response-ratio-next-hrrn">Highest Response Ratio Next （HRRN）<a class="headerlink" href="#highest-response-ratio-next-hrrn" title="Permanent link">&para;</a></h4>
<p>高响应比优先算法</p>
<ul>
<li>非抢占式</li>
<li>HRRN is a <strong>compromise</strong> 折中 between FCFS and SJF</li>
<li>Computing response ratio requires time</li>
<li>improve the responsiveness of the system 提高系统响应性</li>
</ul>
<p>Response Ratio （响应比） = <span class="arithmatex">\(\frac{\text{cpu burst}+\text{waiting time}}{\text{cpu burst}}\)</span> （等待时间和执行时间都要考虑</p>
<p>Take Response Ratio as priority</p>
<p>Larger Response Ratio, higher priority</p>
<h5 id="hrrn"><strong>HRRN</strong> 算法的工作原理<a class="headerlink" href="#hrrn" title="Permanent link">&para;</a></h5>
<ol>
<li>
<p><strong>初始化</strong>： 记录每个进程的到达时间和所需的服务时间。</p>
</li>
<li>
<p><strong>计算响应比</strong>： 对于每个就绪队列中的进程，计算其响应比。</p>
</li>
<li>
<p><strong>选择最高响应比的进程</strong>： </p>
</li>
<li>选择具有最高响应比的进程执行。</li>
<li>
<p>如果有多个进程具有相同的最高响应比，则可以按照其他规则（如先到先服务）来选择。</p>
</li>
<li>
<p><strong>更新等待时间和响应比</strong>： </p>
</li>
<li>每次调度后，更新所有就绪队列中进程的等待时间。</li>
<li>重新计算所有进程的响应比</li>
</ol>
<h4 id="round-robin-rr">Round Robin (RR)<a class="headerlink" href="#round-robin-rr" title="Permanent link">&para;</a></h4>
<p>时间片轮转算法</p>
<ul>
<li>Origin from signature method</li>
<li>Each process gets a small unit of CPU time (time quantum), usually 10-100 milliseconds. After this time has elapsed, the process is preempted and added to the end of the ready queue. 提高系统交互性</li>
<li>Application: Time-sharing system, Multi-tasking system</li>
<li>当前进程的时间片用完后，该进程的状态由执行态变成就绪态</li>
</ul>
<p><img src="../images/image-20241014112933209.png" alt="image-20241014112933209" style="zoom:50%;" /></p>
<p><img src="../images/image-20241014113016699.png" alt="image-20241014113016699" style="zoom:50%;" /></p>
<h4 id="multilevel-queue">Multilevel Queue<a class="headerlink" href="#multilevel-queue" title="Permanent link">&para;</a></h4>
<p>多层队列算法</p>
<p>Ready queue is partitioned into separate queues:</p>
<ul>
<li>foreground (interactive)</li>
<li>background (batch)</li>
</ul>
<p>Each queue has its <strong>own scheduling algorithm</strong>, for example</p>
<ul>
<li>foreground – RR</li>
<li>background – FCFS 计算密集</li>
</ul>
<p>Scheduling must be done between the queues</p>
<ul>
<li>
<p>Fixed priority scheduling; (i.e., serve all from foreground then from background). Possibility of starvation.</p>
</li>
<li>
<p>Time slice – each queue gets a certain amount of CPU time which it can schedule amongst its processes; i.e., 80% to foreground in RR ， 20% to background in FCFS </p>
</li>
</ul>
<h4 id="multiple-feedback-queue">Multiple Feedback Queue<a class="headerlink" href="#multiple-feedback-queue" title="Permanent link">&para;</a></h4>
<p>多级反馈队列</p>
<ul>
<li>
<p>多个就绪队列，优先级逐一降低，按照队列优先级调度</p>
</li>
<li>
<p>设置多个就绪队列，优先级从第一级依次降低</p>
</li>
<li>
<p>优先级高的队列，进程时间片越短</p>
</li>
<li>
<p>每个队列都采用 FCFS ，若在该时间片完成，则撒离系统，未完成，转入下一级级队列</p>
</li>
<li>
<p>按队列优先级调度，仅当上一级为空时，才运行下一级</p>
</li>
</ul>
<p>进程进来，先到优先级最高的队列中，时间片内完成则撤离；否则，到下一级队列排队</p>
<h4 id="multiple-processor-scheduling">Multiple-processor scheduling(了解)<a class="headerlink" href="#multiple-processor-scheduling" title="Permanent link">&para;</a></h4>
<p>多处理器调度</p>
<p>Load balancing 负载均衡</p>
<p>Symmetric multiprocessing(SMP) 对称处理器：每个处理器都是自我调度，多个处理器可以运行、更新一个相同的数据结构</p>
<p>Asymmetric multiprocessing 非对称处理器：只有一个处理器可以接触系统数据结构（调度），减轻数据共享，其他处理器只执行用户代码</p>
<ul>
<li>当调度的处理器坏了，整个系统就运行不下去了</li>
</ul>
<h4 id="real-time-scheduling">Real-time scheduling(了解)<a class="headerlink" href="#real-time-scheduling" title="Permanent link">&para;</a></h4>
<p>实时调度</p>
<p>实时系统一定要在规定时间内完成</p>
<p>Hard real-time systems 硬实时系统：ddl前没运行完有严重后果</p>
<p>Soft real-time systems 软实时系统：可以在ddl前没运行完（eg，腾讯会议</p>
<ul>
<li>Earliest ddl First 最早截止时间优先</li>
<li>Least Laxity First 最低松弛度优先（不怎么用）</li>
<li>A的松弛度=A必须完成的时间-A需要运行的时间-当前时间</li>
<li>Rate Monotonic scheduling 速率单调调度</li>
<li>基于任务的周期（一个进程多久执行一次）来分配优先级，周期越短任务优先级越高</li>
</ul>
<h4 id="thread-scheduling">Thread scheduling(了解)<a class="headerlink" href="#thread-scheduling" title="Permanent link">&para;</a></h4>
<p>线程调度</p>
<p>Local scheduling 用户级</p>
<p>Global scheduling 内核级</p>
<blockquote>
<p>[!NOTE]</p>
<p>批处理 FCFS</p>
<p>分时系统</p>
<p>实时系统</p>
</blockquote>
<h3 id="q">Q<a class="headerlink" href="#q" title="Permanent link">&para;</a></h3>
<p><img src="../images/image-20241021100841358.png" alt="image-20241021100841358" style="zoom: 33%;" /></p>
<blockquote>
<p>外设是不可抢占的</p>
<p>waiting time是进程等待CPU资源的时间！</p>
</blockquote>
<p><img src="../images/image-20241021102905818.png" alt="image-20241021102905818" style="zoom: 33%;" /></p>
<h2 id="6-process-synchronization">6 进程同步 Process synchronization<a class="headerlink" href="#6-process-synchronization" title="Permanent link">&para;</a></h2>
<blockquote>
<p>[!NOTE]</p>
<p>基本概念：syn，race，critical，four requirements（忙则等待、、、）</p>
<p>软件实现方法：单标志，双标志、、、</p>
<p>硬件实现方法：原理、关中断、Test、Swap、CAS、mutex lock</p>
<p>信号量机制：信号量基本概念（形式、类型、用法、实现、缺点）三个经典问题（有界缓冲区、读写者、哲学家）</p>
<p>管程：基本概念（形式、特点、条件变量）、应用</p>
</blockquote>
<h3 id="61-background">6.1 背景 background<a class="headerlink" href="#61-background" title="Permanent link">&para;</a></h3>
<p>共享数据的并发访问可能导致数据不一致性</p>
<p>Producer-consumer</p>
<p><img src="../images/image-20241021105641372.png" alt="image-20241021105641372" style="zoom:50%;" /><img src="../images/image-20241021110813871.png" alt="image-20241021110813871" style="zoom:50%;" /></p>
<p>count++和count--两步有可能出错</p>
<h4 id="race-condition">Race condition 竞态条件<a class="headerlink" href="#race-condition" title="Permanent link">&para;</a></h4>
<p>出错的example：</p>
<p><img src="../images/image-20241021111018744.png" alt="image-20241021111018744" style="zoom:50%;" /></p>
<p>出错的原因：抢占式调度，多个进程对shared data进行操作</p>
<p>Race condition 定义：a memory location is accessed concurrently, and at least one access is a write</p>
<blockquote>
<p><strong>对于访问共享的内核数据，非抢占式的内核是否受竞态条件的影响？</strong></p>
<ul>
<li>可能会受影响，当多处理器对shared data进行操作</li>
</ul>
</blockquote>
<h3 id="62-critical-section-problem">6.2 临界区问题 critical-section problem<a class="headerlink" href="#62-critical-section-problem" title="Permanent link">&para;</a></h3>
<blockquote>
<p><strong>What operations/processes may have critical problems in OS kernel?</strong></p>
<ul>
<li>cpu</li>
<li>用户态：一个进程的多个线程（满足shared data和并发执行）</li>
</ul>
</blockquote>
<p><strong>临界资源</strong>：多进程或多进程中被共享的资源(shared data)且一次只允许一个进程使用</p>
<p><strong>临界区</strong>：程序中一个访问公共资源的程序片段，每个进程中访问临界资源的那段代码被称为临界区</p>
<blockquote>
<p>[!NOTE]</p>
<p><strong>以下是临界资源吗？</strong></p>
<ul>
<li>全局共享变量（是），局部变量（不是），只读数据（不是），CPU（不是）</li>
</ul>
</blockquote>
<p>对一个进程，可能存在多个临界区；临界区可以合并（depends）</p>
<blockquote>
<p>[!CAUTION]</p>
<p>共享资源才需要互斥</p>
</blockquote>
<h4 id="solution">解决方案 solution<a class="headerlink" href="#solution" title="Permanent link">&para;</a></h4>
<h5 id="mutual-exclusion"><strong>Mutual Exclusion</strong>（互斥/忙则等待）<a class="headerlink" href="#mutual-exclusion" title="Permanent link">&para;</a></h5>
<p>如果进程 P<sub>i</sub> 正在其临界区中执行，则其他进程不能在其临界区中执行</p>
<h5 id="progress"><strong>Progress</strong>（空闲让进）<a class="headerlink" href="#progress" title="Permanent link">&para;</a></h5>
<p>如果没有任何进程在其临界区中执行，并且存在一些希望进入其临界区的进程，则不能无限期地推迟选择下一个将进入临界区的进程（即允许一个请求进入临界区的进程立即进入临界区）</p>
<h5 id="bounded-waiting"><strong>Bounded waiting</strong>（有限等待）<a class="headerlink" href="#bounded-waiting" title="Permanent link">&para;</a></h5>
<p>在一个进程发出进入其临界区的请求之后，在该请求被批准之前，必须对允许其他进程进入其临界区的<strong>次数</strong>进行限制</p>
<ul>
<li>假设每个进程以非零速度执行</li>
<li>没有关于<em>N</em>个进程相对速度的假设</li>
</ul>
<h5 id="_6">让权等待<a class="headerlink" href="#_6" title="Permanent link">&para;</a></h5>
<p>（原则上应该遵守，但非必须）当进程不能进入临界区时，应立即释放处理器，防止进程忙则等待。</p>
<h3 id="63">6.3 同步机制<a class="headerlink" href="#63" title="Permanent link">&para;</a></h3>
<h4 id="_7">软件方法<a class="headerlink" href="#_7" title="Permanent link">&para;</a></h4>
<h5 id="_8">单标志法<a class="headerlink" href="#_8" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241023145626698.png" alt="image-20241023145626698" style="zoom:50%;" /></p>
<p>i和j交替执行</p>
<ul>
<li>满足Mutual Exclusion 和 bounded waiting</li>
<li>不满足progess</li>
</ul>
<h5 id="_9">双标志后检查法<a class="headerlink" href="#_9" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241023145544929.png" alt="image-20241023145544929" style="zoom:50%;" /></p>
<ul>
<li>满足Mutual Exclusion</li>
<li>不满足Progress（存在CPU调度的一种情况，两个标志都为TRUE后一直循环下去）</li>
<li>如果没有死循环是bounded waiting，但可能有所以总体不是</li>
</ul>
<h5 id="_10">双标志先检查法<a class="headerlink" href="#_10" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241023150759551.png" alt="image-20241023150759551" style="zoom:50%;" /></p>
<p>和前面两种算法相比，先while再设flag值：</p>
<p><img src="../images/image-20241023150932808.png" alt="image-20241023150932808" style="zoom:50%;" /></p>
<ul>
<li><strong>不满足Mutual Exclusion</strong>（存在CPU调度的一种情况，两个标志都为TRUE，并进入临界区</li>
<li>满足Progres</li>
</ul>
<h5 id="petersons-solution">Peterson’s Solution<a class="headerlink" href="#petersons-solution" title="Permanent link">&para;</a></h5>
<p>双进程解决方案
假设 LOAD 和 STORE 指令是原子的；即不能被中断。
两个进程共享两个变量：<code>int turn;Boolean flag[2];</code>
变量<code>turn</code>表示轮到谁进入临界区。
flag 数组用于指示进程是否已准备好进入临界区。<code>flag[i] = true</code> 表示进程 P<sub>i</sub> 已准备好</p>
<p>基本思想：<img src="../images/image-20241023151545037.png" alt="image-20241023151545037" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1">//Process Pi</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="w">    </span><span class="n">turn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">j</span><span class="p">;</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">turn</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">j</span><span class="p">);</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">        </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="p">}</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a><span class="c1">//Process Pj</span>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a><span class="w">    </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="w">    </span><span class="n">turn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">flag</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">turn</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">i</span><span class="p">);</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="n">flag</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>满足mutual exception 和 progress，不会</li>
<li>满足bounded waiting，bound是1</li>
</ul>
<blockquote>
<p>[!CAUTION]</p>
<p>There are no guarantees that Peterson's solution works correctly on modern computer architectures.</p>
<p>Reason：计算机编译优化 -&gt; 代码的乱序执行【先load（读），再store（赋值）】</p>
<p>Solution：Memory barrier ( 内存栅栏 ) -- 插入这条指令后就不会乱序执行了</p>
</blockquote>
<h5 id="bakery-algorithm-lamport">Bakery Algorithm (面包房算法) Lamport<a class="headerlink" href="#bakery-algorithm-lamport" title="Permanent link">&para;</a></h5>
<p>Multiple-Process Solutions： for <strong>n</strong> processes</p>
<ol>
<li>任何时间，最多只能有一个进程进入 critical section ；</li>
<li>每个进程最终都会进入 critical section ；</li>
<li>每个进程都能停在 noncritical section ；</li>
<li>不能对进程的速度做任何假设。</li>
</ol>
<p>基本思想（排队取号）：<img src="../images/image-20241023153601642.png" alt="image-20241023153601642" style="zoom:50%;" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">//Multiple-Process Solutions</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="k">do</span><span class="p">{</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="w">    </span><span class="n">choosing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="w">    </span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">{</span><span class="n">number</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="w"> </span><span class="n">number</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="w"> </span><span class="err">…</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">[</span><span class="n">n</span><span class="mi">-1</span><span class="p">]}</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="c1">// 选号码</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="w">    </span><span class="n">choosing</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="err">＜</span><span class="w"> </span><span class="n">n</span><span class="p">;</span><span class="w"> </span><span class="n">j</span><span class="o">++</span><span class="p">){</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">choosing</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">        </span><span class="k">while</span><span class="w"> </span><span class="p">((</span><span class="n">number</span><span class="p">[</span><span class="n">j</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="n">j</span><span class="p">],</span><span class="w"> </span><span class="n">j</span><span class="p">)</span><span class="w"> </span><span class="err">＜</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="w"> </span><span class="n">i</span><span class="p">));</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="p">};</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="n">CRITICAL</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">        </span><span class="n">number</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">    </span><span class="n">REMAINDER</span><span class="w"> </span><span class="n">SECTION</span>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="p">}</span><span class="w"> </span><span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
</code></pre></div>
<ul>
<li>满足mutual exception 和 progress，</li>
<li>满足bounded waiting，bound为 n-1</li>
</ul>
<h4 id="_11">硬件方法<a class="headerlink" href="#_11" title="Permanent link">&para;</a></h4>
<p><strong>Synchronization Hardware</strong></p>
<p>Modern machines provide special atomic hardware <strong>instructions</strong></p>
<p>​   -&gt; <mark>Atomic = non-interruptable</mark> (原子操作，不能中断；后三种方法都用了这一思想)</p>
<p><strong>优点</strong>  </p>
<ul>
<li>
<p>适用于任意数目的进程，在单处理器或多处理器上</p>
</li>
<li>
<p>简单，容易验证其正确性</p>
</li>
<li>
<p>可以支持进程内存在多个临界区，只需为每个临界区设立一个布尔变量</p>
</li>
</ul>
<p><strong>缺点</strong></p>
<ul>
<li>
<p>耗费 CPU 时间，不能实现“让权等待” </p>
</li>
<li>
<p>可能不满足有限等待：从等待进程中随机选择一个进入临界区，有的进程可能一直选不上 </p>
</li>
<li>
<p>可能死锁</p>
</li>
</ul>
<h5 id="disable-interrupts">关中断法 Disable interrupts(中断屏蔽法)<a class="headerlink" href="#disable-interrupts" title="Permanent link">&para;</a></h5>
<p>思想：进入临界区前直接屏蔽中断，保证临界区资源顺利使用；使用完毕，打开中断</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="w">    </span><span class="n">Disable</span><span class="w"> </span><span class="n">Interrupts</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="n">Critical</span><span class="w"> </span><span class="n">section</span><span class="p">;</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="n">Enable</span><span class="w"> </span><span class="n">Interrupts</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="w">    </span><span class="n">Remainder</span><span class="w"> </span><span class="n">section</span><span class="p">;</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="p">}</span><span class="w"> </span>
</code></pre></div>
<h6 id="_12">缺点<a class="headerlink" href="#_12" title="Permanent link">&para;</a></h6>
<ul>
<li>
<p><strong>可能影响系统效率</strong>：滥用关中断会严重影响 CPU 执行效率，其锁住CPU可能导致原本一些短时间即可完成的需要等待开中断，影响cpu并发执行，cpu利用率下降</p>
</li>
<li>
<p><strong>不适用于多 CPU 系统</strong>：中断屏蔽法适用于单 CPU 系统，在多 CPU 系统中<strong>无法有效同步</strong>各个 CPU 的操作。 </p>
</li>
<li><strong>安全性问题</strong>：滥用关中断权力可能导致严重后果，例如在关闭中断期间，一些重要的中断请求可能被错过，影响系统的稳定性和可靠性。</li>
</ul>
<h5 id="testandset-lock-instructiontsl"><strong>TestAndSet Lock Instruction</strong>（TSL）<a class="headerlink" href="#testandset-lock-instructiontsl" title="Permanent link">&para;</a></h5>
<p>Test and modify the content of a word atomically.</p>
<p>Shared boolean variable lock, initialized to false.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">boolean</span><span class="w"> </span><span class="nf">TestAndSet</span><span class="w"> </span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">rv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">target</span><span class="p">;</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="w">    </span><span class="o">*</span><span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">rv</span><span class="o">:</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="p">}</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">TestAndSet</span><span class="w"> </span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="w"> </span><span class="p">));</span><span class="cm">/* do nothing*/</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="w">    </span><span class="c1">// critical section</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a><span class="w">    </span><span class="c1">// remainder section </span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a><span class="p">};</span>
</code></pre></div>
<ul>
<li>满足mutual exclusion, progress</li>
<li>不满足bounded waiting（进入临界区靠运气），不满足让权等待</li>
<li>等待进入临界区的进程不会主动放弃CPU</li>
</ul>
<h5 id="swap-instruction">Swap Instruction<a class="headerlink" href="#swap-instruction" title="Permanent link">&para;</a></h5>
<p>思想</p>
<ol>
<li>
<p>对每个临界资源，swap设置一个全局<code>bool</code>变量<code>lock</code>(初值为false) ，每个进程设置局部变量<code>key</code>(初值为 true)</p>
</li>
<li>
<p>进程调用<code>swap()</code>指令访问临界区，会交换key和lock的值，实现上锁，进入访问</p>
</li>
<li>
<p>退出时把<code>lock</code>重置为<code>false</code></p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="w">    </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TRUE</span><span class="p">;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">=</span><span class="n">TRUE</span><span class="p">)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="w">        </span><span class="n">Swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="w">    </span><span class="c1">// critical section</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FALSE</span><span class="p">;</span>
<a id="__codelineno-5-8" name="__codelineno-5-8" href="#__codelineno-5-8"></a><span class="w">    </span><span class="c1">// remainder section </span>
<a id="__codelineno-5-9" name="__codelineno-5-9" href="#__codelineno-5-9"></a><span class="p">}</span>
<a id="__codelineno-5-10" name="__codelineno-5-10" href="#__codelineno-5-10"></a>
<a id="__codelineno-5-11" name="__codelineno-5-11" href="#__codelineno-5-11"></a><span class="kt">void</span><span class="w"> </span><span class="n">Swap</span><span class="p">(</span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">boolean</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-5-12" name="__codelineno-5-12" href="#__codelineno-5-12"></a><span class="p">{</span>
<a id="__codelineno-5-13" name="__codelineno-5-13" href="#__codelineno-5-13"></a><span class="w">    </span><span class="n">boolean</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">a</span><span class="p">;</span>
<a id="__codelineno-5-14" name="__codelineno-5-14" href="#__codelineno-5-14"></a><span class="w">    </span><span class="o">*</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">b</span><span class="p">;</span>
<a id="__codelineno-5-15" name="__codelineno-5-15" href="#__codelineno-5-15"></a><span class="w">    </span><span class="o">*</span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
<a id="__codelineno-5-16" name="__codelineno-5-16" href="#__codelineno-5-16"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>满足mutual exclusion, progress</li>
<li>不满足bounded waiting（</li>
</ul>
<h5 id="the-compare_and_swap-cas-instruction"><strong>The compare_and_swap (CAS) Instruction</strong><a class="headerlink" href="#the-compare_and_swap-cas-instruction" title="Permanent link">&para;</a></h5>
<p>思想</p>
<ol>
<li>Executed atomically</li>
<li>Returns the original value of passed parameter <strong>value</strong></li>
<li>Set the variable <strong>value</strong> the value of the passed parameter <strong>new_value</strong> but only if <code>*value == expected</code> is true. That is, the swap takes place only under this condition.</li>
</ol>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1">//Shared integer lock initialized to 0;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="nb">true</span><span class="p">){</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">compare_and_swap</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lock</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="cm">/* do nothing */</span><span class="w"> </span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="w">    </span><span class="cm">/* critical section */</span><span class="w"> </span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a><span class="w">    </span><span class="n">lock</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a><span class="w">    </span><span class="cm">/* remainder section */</span><span class="w"> </span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a><span class="p">}</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a><span class="kt">int</span><span class="w"> </span><span class="n">compare_and_swap</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">expected</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">new_value</span><span class="p">)</span>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">value</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-6-12" name="__codelineno-6-12" href="#__codelineno-6-12"></a><span class="w">        </span><span class="o">*</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">new_value</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-13" name="__codelineno-6-13" href="#__codelineno-6-13"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span><span class="w"> </span>
<a id="__codelineno-6-14" name="__codelineno-6-14" href="#__codelineno-6-14"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>满足mutual exclusion, progress</li>
<li>不满足bounded waiting（</li>
</ul>
<p>解决办法：排队</p>
<h5 id="bounded-waiting-with-compare-and-swap"><strong>Bounded-waiting with compare-and-swap</strong><a class="headerlink" href="#bounded-waiting-with-compare-and-swap" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241028105047216.png" alt="image-20241028105047216" style="zoom:33%;" /></p>
<ul>
<li>满足mutual exclusion, progress和bounded waiting</li>
</ul>
<blockquote>
<p>[!CAUTION]</p>
<p>以上对TS和Swap指令的描述仅为功能描述，它们由硬件逻辑实现，不会被中断</p>
</blockquote>
<h4 id="mutex-locks">互斥锁 Mutex locks<a class="headerlink" href="#mutex-locks" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241028112035245.png" alt="image-20241028112035245" style="zoom:33%;" /></p>
<p>But this solution requires <strong>busy waiting</strong> <strong>（不停空循环）</strong></p>
<p>This lock therefore called a <strong>spinlock</strong> <strong>（也叫 自旋锁）</strong></p>
<ul>
<li>主要采用硬件机制来实现</li>
<li>缺点：忙等待</li>
</ul>
<h4 id="semaphores">信号量方法 Semaphores<a class="headerlink" href="#semaphores" title="Permanent link">&para;</a></h4>
<p>用来解决同步和互斥问题</p>
<p>Two indivisible operations modify S: </p>
<ul>
<li>
<p><code>wait()</code> and <code>signal()</code>, originally called<code>P()</code>and<code>V()</code> </p>
</li>
<li>
<p>Proberen(测试)，Verhogen(增加) </p>
</li>
<li>
<p>只能在wait和signal中对信号量进行操作</p>
</li>
<li>
<p>低级的进程通信原语</p>
</li>
</ul>
<p>Can only be accessed via two indivisible (atomic) operations:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">wait</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//资源进入临界区</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// no-op，S &lt;= 0：有进程在临界区</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="w">    </span><span class="n">S</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="p">}</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="n">signal</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">//资源退出临界区，空出资源给其他进程</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="w">    </span><span class="n">S</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="p">}</span>
</code></pre></div>
<p>Can be implemented without busy waiting &rarr; 实现让权等待</p>
<blockquote>
<p>[!IMPORTANT]</p>
<p><img src="../images/image-20241030152700179.png" alt="image-20241030152700179" style="zoom:40%;" /></p>
<p>S.value=0 已经有一个进程在临界区</p>
</blockquote>
<p>信号量种类：</p>
<p><img src="../images/image-20241028113509355.png" alt="image-20241028113509355" style="zoom:33%;" /></p>
<p>👆互斥访问</p>
<p>同步操作：</p>
<p><img src="../images/image-20241030143820461.png" alt="image-20241030143820461" style="zoom:33%;" /></p>
<p>Question：有四个房间，四个进程访问</p>
<p><img src="../images/image-20241030144512191.png" alt="image-20241030144512191" style="zoom: 33%;" /></p>
<h5 id="semaphore-implementation">实现 Semaphore Implementation<a class="headerlink" href="#semaphore-implementation" title="Permanent link">&para;</a></h5>
<h6 id="busy-waiting">Busy waiting<a class="headerlink" href="#busy-waiting" title="Permanent link">&para;</a></h6>
<p><img src="../images/image-20241030144747181.png" alt="image-20241030144747181" style="zoom:33%;" /></p>
<p><img src="../images/image-20241030145309092.png" alt="image-20241030145309092" style="zoom:33%;" /></p>
<p>对P不太友好</p>
<h6 id="no-busy-waiting">no Busy waiting 非忙等<a class="headerlink" href="#no-busy-waiting" title="Permanent link">&para;</a></h6>
<p><img src="../images/image-20241030145617397.png" alt="image-20241030145617397" style="zoom:33%;" /></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="cm">/*Implementation of wait*/</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">wait</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">){</span><span class="w"> </span><span class="c1">//取信号量操作</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="w">    </span><span class="n">value</span><span class="o">--</span><span class="p">;</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="w">        </span><span class="c1">// add this process to waiting queue</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="w">        </span><span class="n">block</span><span class="p">();</span><span class="w"> </span><span class="c1">// 插到S的waiting queue中</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="p">}</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a><span class="cm">/*Implementation of signal*/</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a><span class="n">Signal</span><span class="w"> </span><span class="p">(</span><span class="n">S</span><span class="p">){</span><span class="w"> </span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a><span class="w">    </span><span class="n">value</span><span class="o">++</span><span class="p">;</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a><span class="w">        </span><span class="c1">// remove a process P from the waiting queue</span>
<a id="__codelineno-8-15" name="__codelineno-8-15" href="#__codelineno-8-15"></a><span class="w">        </span><span class="n">wakeup</span><span class="p">(</span><span class="n">P</span><span class="p">);</span><span class="w"> </span><span class="c1">// 把一个进程唤醒，移出waiting queue，到临界区执行</span>
<a id="__codelineno-8-16" name="__codelineno-8-16" href="#__codelineno-8-16"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-17" name="__codelineno-8-17" href="#__codelineno-8-17"></a><span class="p">}</span>
</code></pre></div>
<ul>
<li>S的取值可以是负的了（相比原先的wait和signal），S取负表示当前队列排队进程的个数</li>
</ul>
<p><img src="../images/image-20241030151249807.png" alt="image-20241030151249807" style="zoom:33%;" /></p>
<p><img src="../images/image-20241030151458384.png" alt="image-20241030151458384" style="zoom:33%;" /></p>
<p><img src="../images/image-20241030151550913.png" alt="image-20241030151550913" style="zoom:33%;" /></p>
<blockquote>
<p>[!WARNING]</p>
<p>进程在标黄处sleep后，再次被唤醒时会从头开始执行！</p>
</blockquote>
<p>Busy waiting? No busy waiting?</p>
<ul>
<li>No busy waiting</li>
</ul>
<p>What if one must choose busy waiting?</p>
<ul>
<li>电脑要多CPU</li>
<li>上下文切换时间 &gt; busy waiting，选择no busy waiting；&lt;的话两者都行</li>
</ul>
<h5 id="deadlock-and-starvation"><strong>Deadlock and Starvation</strong><a class="headerlink" href="#deadlock-and-starvation" title="Permanent link">&para;</a></h5>
<p><strong>Deadlock 死锁</strong> – two or more processes are waiting indefinitely for an event that can be caused by only one of the waiting processes</p>
<p><strong>Starvation 饥饿</strong> – indefinite blocking. A process may never be removed from the semaphore queue in which it is suspended</p>
<h5 id="classical-problems-of-synchronization"><strong>Classical Problems of Synchronization</strong><a class="headerlink" href="#classical-problems-of-synchronization" title="Permanent link">&para;</a></h5>
<h6 id="bounded-buffer-problem">Bounded-Buffer Problem<a class="headerlink" href="#bounded-buffer-problem" title="Permanent link">&para;</a></h6>
<p><em>N</em> buffers, each can hold one item</p>
<ul>
<li>Semaphore <strong>mutex</strong> initialized to the value <strong>1</strong> 互斥信号量1个</li>
<li>Semaphore <strong>full</strong> initialized to the value 0, counting full items</li>
<li>Semaphore <strong>empty</strong> initialized to the value <strong>N</strong>, counting empty items</li>
</ul>
<p><img src="../images/image-20241030153449418.png" alt="image-20241030153449418" style="zoom:33%;" /></p>
<h6 id="readers-and-writers-problem">Readers and Writers Problem<a class="headerlink" href="#readers-and-writers-problem" title="Permanent link">&para;</a></h6>
<p>A data set is shared among a number of concurrent processes</p>
<ul>
<li>Readers – only read the data set; they do not perform any updates</li>
<li>Writers – can both read and write.</li>
</ul>
<p><strong>Problem</strong> – allow multiple readers to read at the same time. Only one single writer can access the shared data at the same time.  ( 读者优先 ) </p>
<p>Shared Data</p>
<ul>
<li>
<p>Data set</p>
</li>
<li>
<p>Semaphore <strong>mutex</strong> initialized to 1, to ensure mutual exclusion when readcount is updated.</p>
</li>
<li>
<p>Semaphore <strong>wrt</strong> initialized to 1.</p>
</li>
<li>
<p>Integer <strong>readcount</strong> initialized to 0 读者的数量</p>
</li>
</ul>
<p><img src="../images/image-20241030154705621.png" alt="image-20241030154705621" style="zoom:33%;" /></p>
<h6 id="dining-philosophers-problem">Dining-Philosophers Problem<a class="headerlink" href="#dining-philosophers-problem" title="Permanent link">&para;</a></h6>
<p>哲学家就餐问题</p>
<p>Shared data </p>
<ul>
<li>
<p>Bowl of rice (data set)</p>
</li>
<li>
<p>Semaphore <code>chopstick [5]</code> initialized to 1</p>
</li>
</ul>
<p><img src="../images/image-20241030155058113.png" alt="image-20241030155058113" style="zoom:33%;" /></p>
<p>如果只设置一个筷子的信号量，设置为5，有什么问题？一个筷子可能被拿两次，违反互斥性</p>
<h4 id="_13">管程方法<a class="headerlink" href="#_13" title="Permanent link">&para;</a></h4>
<p>实现互斥和同步</p>
<h5 id="monitor">Monitor<a class="headerlink" href="#monitor" title="Permanent link">&para;</a></h5>
<p>A high-level abstraction that provides a convenient and effective mechanism for process synchronization. </p>
<p>Only one process may be active within the monitor at a time. (hint: the other processes may be sleeping within the monitor)</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1">//管程变量只有内部函数可以访问</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">monitor</span><span class="w"> </span><span class="n">monitor</span><span class="o">-</span><span class="n">name</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="p">{</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">    </span><span class="c1">// shared variable declarations</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="w">    </span><span class="n">procedure</span><span class="w"> </span><span class="nf">P1</span><span class="w"> </span><span class="p">(</span><span class="err">…</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">…</span><span class="p">.</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a><span class="w">    </span><span class="err">…</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="w">        </span><span class="n">procedure</span><span class="w"> </span><span class="n">Pn</span><span class="w"> </span><span class="p">(</span><span class="err">…</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="err">……</span><span class="p">}</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a><span class="w">    </span><span class="n">Initialization</span><span class="w"> </span><span class="n">code</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="err">…</span><span class="p">.)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">…</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-9" name="__codelineno-9-9" href="#__codelineno-9-9"></a><span class="w">    </span><span class="err">…</span><span class="w"> </span>
<a id="__codelineno-9-10" name="__codelineno-9-10" href="#__codelineno-9-10"></a><span class="p">}</span>
</code></pre></div>
<p><img src="../images/image-20241104104332459.png" alt="image-20241104104332459" style="zoom:33%;" />函数挂起</p>
<p>x.wait()阻塞该进程并将他插入到x序列</p>
<h5 id="_14">管程方法解决哲学家就餐问题<a class="headerlink" href="#_14" title="Permanent link">&para;</a></h5>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">monitor</span><span class="w"> </span><span class="n">DP</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">    </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">,</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">          </span><span class="n">condition</span><span class="w"> </span><span class="n">self</span><span class="w"> </span><span class="p">[</span><span class="mi">5</span><span class="p">];</span><span class="w"> </span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="w">          </span><span class="c1">//philosopher i can delay herself when unable to get chopsticks</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">pickup</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// 拿筷子</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="w">              </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">;</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="w">              </span><span class="n">test</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// 看看左边右边有没有人在eating</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a><span class="w">              </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="c1">// 自己hungry</span>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="w">                  </span><span class="n">self</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">wait</span><span class="p">;</span><span class="w"> </span><span class="c1">// 筷子还不可用，等待</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="w">          </span><span class="p">}</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">putdown</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="w">              </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="w">              </span><span class="c1">// test left and right neighbors</span>
<a id="__codelineno-10-15" name="__codelineno-10-15" href="#__codelineno-10-15"></a><span class="w">              </span><span class="n">test</span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span><span class="w"> </span><span class="c1">// 如若满足则唤醒进行吃饭</span>
<a id="__codelineno-10-16" name="__codelineno-10-16" href="#__codelineno-10-16"></a><span class="w">              </span><span class="n">test</span><span class="p">((</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">);</span>
<a id="__codelineno-10-17" name="__codelineno-10-17" href="#__codelineno-10-17"></a><span class="w">          </span><span class="p">}</span>
<a id="__codelineno-10-18" name="__codelineno-10-18" href="#__codelineno-10-18"></a><span class="w">          </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-19" name="__codelineno-10-19" href="#__codelineno-10-19"></a><span class="w">              </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">(</span><span class="n">state</span><span class="p">[(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">4</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<a id="__codelineno-10-20" name="__codelineno-10-20" href="#__codelineno-10-20"></a><span class="w">                  </span><span class="p">(</span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">HUNGRY</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;&amp;</span>
<a id="__codelineno-10-21" name="__codelineno-10-21" href="#__codelineno-10-21"></a><span class="w">                  </span><span class="p">(</span><span class="n">state</span><span class="p">[(</span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="p">]</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">EATING</span><span class="p">)</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-22" name="__codelineno-10-22" href="#__codelineno-10-22"></a><span class="w">                  </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EATING</span><span class="w"> </span><span class="p">;</span>
<a id="__codelineno-10-23" name="__codelineno-10-23" href="#__codelineno-10-23"></a><span class="w">                  </span><span class="n">self</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">signal</span><span class="p">()</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="c1">//执行时不在signal中等待，这句signal没有用</span>
<a id="__codelineno-10-24" name="__codelineno-10-24" href="#__codelineno-10-24"></a><span class="w">              </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-10-25" name="__codelineno-10-25" href="#__codelineno-10-25"></a><span class="w">          </span><span class="n">initialization_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<a id="__codelineno-10-26" name="__codelineno-10-26" href="#__codelineno-10-26"></a><span class="w">              </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
<a id="__codelineno-10-27" name="__codelineno-10-27" href="#__codelineno-10-27"></a><span class="w">                  </span><span class="n">state</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">THINKING</span><span class="p">;</span>
<a id="__codelineno-10-28" name="__codelineno-10-28" href="#__codelineno-10-28"></a><span class="w">          </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<ul>
<li>When the left and right philosophers, <strong>self[(i+4)%5]</strong> and <strong>self[(i+1)%5]</strong></li>
</ul>
<p>continue to eat, <strong>self[i]</strong> may <em>starve</em></p>
<h4 id="_15">例子<a class="headerlink" href="#_15" title="Permanent link">&para;</a></h4>
<h5 id="pthreads">Pthreads<a class="headerlink" href="#pthreads" title="Permanent link">&para;</a></h5>
<p>It provides:</p>
<ul>
<li>
<p>mutex locks</p>
</li>
<li>
<p>condition variables</p>
</li>
</ul>
<p>Non-portable extensions include:</p>
<ul>
<li>
<p>read-write locks</p>
</li>
<li>
<p>spin locks</p>
</li>
</ul>
<p>Using <code>pthread_cond_wait()</code> &amp; <code>pthread_cond_signal()</code></p>
<h3 id="_16">题目<a class="headerlink" href="#_16" title="Permanent link">&para;</a></h3>
<p>1.</p>
<h2 id="7-deadlock">7 死锁 Deadlock<a class="headerlink" href="#7-deadlock" title="Permanent link">&para;</a></h2>
<h3 id="71-the-deadlock-problem">7.1 The Deadlock Problem<a class="headerlink" href="#71-the-deadlock-problem" title="Permanent link">&para;</a></h3>
<p><strong>死锁</strong>：多个进程因竞争共享资源而造成相互等待的一种僵局，使得各个进程都被阻塞，若无外</p>
<p>力作用，这些进程都将永远不能再向前推进</p>
<h4 id="_17">产生死锁的四个必要条件<a class="headerlink" href="#_17" title="Permanent link">&para;</a></h4>
<p><img src="../images/image-20241106152044852.png" alt="image-20241106152044852" style="zoom:33%;" /></p>
<blockquote></blockquote>
<h3 id="72-system-model">7.2 系统模型 System Model<a class="headerlink" href="#72-system-model" title="Permanent link">&para;</a></h3>
<p>resource type &amp; resource instances</p>
<h4 id="resource-allocation-graph">资源分配图 Resource-Allocation Graph<a class="headerlink" href="#resource-allocation-graph" title="Permanent link">&para;</a></h4>
<p>A set of vertices<strong>顶点 V</strong> and a set of edges<strong>边 E</strong></p>
<p><img src="../images/image-20241106153033476.png" alt="image-20241106153033476" style="zoom:33%;" /></p>
<p>顶点表示资源R或进程P</p>
<p>边：<strong>P-&gt;R 等待资源</strong>; <strong>R-&gt;P 可以使用资源（资源R已经被P占用）</strong></p>
<p>死锁一定有环，有环不一定死锁</p>
<p>If graph contains no cycles =&gt; no deadlock. 无环一定没有死锁</p>
<p>If graph contains a cycle =&gt;</p>
<ul>
<li>
<p>if only one instance per resource type, then deadlock.</p>
</li>
<li>
<p>if several instances per resource type, possibility of deadlock.</p>
</li>
</ul>
<h3 id="73-methods-for-handling-deadlocks">7.3 死锁处理方法 Methods for Handling Deadlocks<a class="headerlink" href="#73-methods-for-handling-deadlocks" title="Permanent link">&para;</a></h3>
<p>Ensure that the system will never enter a deadlock state. 让系统永远不进入死锁状态 ---- <strong>Prevention 死锁预防</strong>、 <strong>Avoidance 死锁避免</strong></p>
<p>Allow the system to enter a deadlock state and then recover. 允许系统进入死锁状态，但可以恢复 ----<strong>Detection 死锁检测</strong>、 <strong>Recovery 死锁解除</strong></p>
<p>Ignore the problem and pretend that deadlocks never occur in the system. 忽略，假装不出现死锁 ---- <strong>鸵鸟算法</strong></p>
<ul>
<li>鸵鸟算法 is used by most operating systems, including UNIX、Linux、Windows.
  为什么选这个？用户运行多，解决代价少</li>
</ul>
<h4 id="deadlock-prevention">Deadlock Prevention (预防)<a class="headerlink" href="#deadlock-prevention" title="Permanent link">&para;</a></h4>
<p>破坏死锁产生的四个必要条件之一</p>
<p>Restrain the ways request can be made.</p>
<ol>
<li><strong>Prevent Mutual Exclusion 不互斥</strong> – not required for sharable resources; must hold for nonsharable resources 不共享资源，实际中不太可行</li>
<li><strong>Prevent Hold and Wait 不请求等待</strong> - must guarantee that whenever a process requests a resource, it does not hold any other resources.</li>
<li>Require process to request and be allocated all its resources before it begins execution, or allow process to request resources only when the process has none (<strong>release all current resources before requesting any additional ones</strong>).</li>
<li>
<p><strong>Low resource utilization</strong>; <strong>starvation possible</strong>. (example: copy data from DVD drive to a disk file, sorts the file, then prints the results to a printer.)</p>
</li>
<li>
<p><strong>Prevent No Preemption 可剥夺</strong> – 变成非抢占式，实际中不太可行</p>
</li>
<li><strong>Prevent Circular Wait 不循环等待</strong> – impose a total <strong>ordering</strong> of all resource types, and require that each process requests resources in an increasing order of enumeration. </li>
</ol>
<p>以上方法在实际中都不太可行</p>
<h4 id="deadlock-avoidance">Deadlock Avoidance (避免)<a class="headerlink" href="#deadlock-avoidance" title="Permanent link">&para;</a></h4>
<p>通过动态检测资源分配的安全性，确保系统不会进入不安全状态</p>
<ul>
<li>为实现安全性，我们需要知道</li>
<li>each process declares the maximum number of resources of each type that it may need</li>
<li>The deadlock-avoidance algorithm dynamically examines the resource-allocation state to ensure that there can never be a circular-wait condition.</li>
<li>Resource-allocation state is defined by the number of 
    available and allocated resources, and the maximum 
    demands of the processes.</li>
</ul>
<h5 id="safe-state">safe state<a class="headerlink" href="#safe-state" title="Permanent link">&para;</a></h5>
<p><P1 , P2 , …, Pn> 称为安全序列。如果系统不存在安全序列，则称系统处于不安全状态</p>
<p>对于进程序列中的每一个进程Pi，当前系统已经分配了一些资源，还剩下一些资源。如果 <strong>Pi前面的资源之和+系统剩下的资源 能够满足Pi执行完毕</strong>，则这个序列是个安全状态。</p>
<p><img src="../images/image-20241111103432235.png" alt="image-20241111103432235" style="zoom:33%;" /></p>
<blockquote>
<p>[!NOTE]</p>
<p>If a system is in safe state =&gt; no deadlocks. 安全状态一定无死锁</p>
<p>If a system is in unsafe state =&gt; possibility of deadlock. 不安全可能有死锁</p>
<p>Avoidance =&gt; ensure that a system will never enter an unsafe state.</p>
</blockquote>
<p><img src="../images/image-20241111104223355.png" alt="image-20241111104223355" style="zoom:33%;" /></p>
<h5 id="avoidance-algorithms">Avoidance algorithms<a class="headerlink" href="#avoidance-algorithms" title="Permanent link">&para;</a></h5>
<p><strong>Single</strong> instance of a resource type. Use a resourceallocation graph</p>
<p><strong>Multiple</strong> instances of a resource type. Use the banker’s algorithm</p>
<h6 id="resource-allocation-graph-algorithm">Resource-Allocation Graph Algorithm 资源分配图算法<a class="headerlink" href="#resource-allocation-graph-algorithm" title="Permanent link">&para;</a></h6>
<p>Claim edge Pi -&gt; Rj indicated that process Pi may request resource Rj</p>
<p>有三种边：claim edge、request edge 和 assignment edge</p>
<p>？</p>
<h6 id="bankers-algorithm">Banker’s Algorithm 银行家算法<img alt="🔥" class="twemoji" src="https://cdn.jsdelivr.net/gh/jdecked/twemoji@15.0.3/assets/svg/1f525.svg" title=":fire:" /><a class="headerlink" href="#bankers-algorithm" title="Permanent link">&para;</a></h6>
<p><img src="../images/image-20241111110516636.png" alt="image-20241111110516636" style="zoom:33%;" /></p>
<p>数据结构</p>
<p><img src="../images/image-20241111110607001.png" alt="image-20241111110607001" style="zoom:33%;" /></p>
<p>Example</p>
<p><img src="../images/image-20241111111754885.png" alt="image-20241111111754885" style="zoom:33%;" /></p>
<p><img src="../images/image-20241111112228808.png" alt="image-20241111112228808" style="zoom:33%;" /></p>
<h5 id="safety-algorithm">Safety Algorithm<a class="headerlink" href="#safety-algorithm" title="Permanent link">&para;</a></h5>
<p><img src="../images/image-20241111111035473.png" alt="image-20241111111035473" style="zoom:33%;" /></p>
<h4 id="deadlock-detection">Deadlock Detection ( 检测 )<a class="headerlink" href="#deadlock-detection" title="Permanent link">&para;</a></h4>
<p>本质：safety 算法，全部满足就没有死锁</p>
<h5 id="single-instance-of-each-resource-type">Single Instance of Each Resource Type<a class="headerlink" href="#single-instance-of-each-resource-type" title="Permanent link">&para;</a></h5>
<p>检查wait for graph有没有环</p>
<p><img src="../images/image-20241111112900123.png" alt="image-20241111112900123" style="zoom:33%;" /></p>
<h5 id="several-instances-of-a-resource-type">Several Instances of a Resource Type<a class="headerlink" href="#several-instances-of-a-resource-type" title="Permanent link">&para;</a></h5>
<p>调用safety算法</p>
<p>时间复杂度：O(m × n^2^)</p>
<h5 id="completely-reducible-graph">Completely Reducible Graph 可完全化简图<a class="headerlink" href="#completely-reducible-graph" title="Permanent link">&para;</a></h5>
<p>能消去图中所有边，能则称为可完全化简图</p>
<p>找出一个既不阻塞又非独立的进程结点 Pi</p>
<p>在顺利的情况下，分配给其资源让其完成，消去所有边变成孤立点</p>
<p>循环上述两步操作，直至消去所有边，代表无死锁。</p>
<h3 id="77-recovery-from-deadlock">7.7 Recovery from Deadlock<a class="headerlink" href="#77-recovery-from-deadlock" title="Permanent link">&para;</a></h3>
<p>资源剥夺法：把部分进程挂起，剥夺其资源</p>
<p>撤销进程法：撤销部分进程，释放资源</p>
<p>进程回退法：让一个进程或多个进程回退到避免死锁的地步，释放中间资源</p>
<p>依据：进程的优先级、已执行时间、剩余时间、已用资源、交互还是批处理等</p>
<h4 id="resource-preemption">Resource Preemption<a class="headerlink" href="#resource-preemption" title="Permanent link">&para;</a></h4>
<p> Selecting a victim – minimize cost.
 Rollback – return to some safe state, restart process for that state.
 Starvation – same process may always be picked as victim, include number of rollback in cost factor</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024年11月12日 22:29:30</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime">2024年11月12日 22:29:30</span>
  </span>

    
    
    
  </aside>




<div id="__comments">
  
    <h2 ><!-- 评论 -->评论区~</h2>
    
    有用的话请给我个赞和 star => <a href="https://cindyzhou2003.github.io/mymkdocs/">
        <img alt="GitHub stars" src="https://img.shields.io/github/stars/CindyZhou2003/mymkdocs.svg?style=plastic&amp;label=Stars"></a>
    
    
    </div>
    <script src="https://giscus.app/client.js"
        data-repo="CindyZhou2003/mymkdocs"
        data-repo-id="R_kgDOJHRt5g"
        data-category="General"
        data-category-id="DIC_kwDOJHRt5s4Cge0r"
        data-mapping="pathname"
        data-strict="0"
        data-reactions-enabled="1"
        data-emit-metadata="0"
        data-input-position="top"
        data-theme="light"
        data-lang="zh-CN"
        crossorigin="anonymous"
        async>

        updateScheme();

    </script>
    
    
    <!-- Synchronize Giscus theme with palette -->
    <script>
    var giscus = document.querySelector("script[src*=giscus]")
    
    /* Set palette on initial load */
    var palette = __md_get("__palette")
    if (palette && typeof palette.color === "object") {
        var theme = palette.color.scheme === "slate" ? "dark" : "light"
        giscus.setAttribute("data-theme", theme) 
    }
    
    /* Register event handlers after documented loaded */
    document.addEventListener("DOMContentLoaded", function() {
        var ref = document.querySelector("[data-md-component=palette]")
        ref.addEventListener("change", function() {
        var palette = __md_get("__palette")
        if (palette && typeof palette.color === "object") {
            var theme = palette.color.scheme === "slate" ? "dark" : "light"
            localStorage.setItem("data-md-color-scheme", palette.color.scheme === "slate" ? "slate" : "default");
            /* Instruct Giscus to change theme */
            var frame = document.querySelector(".giscus-frame")
            frame.contentWindow.postMessage(
            { giscus: { setConfig: { theme } } },
            "https://giscus.app"
            )
        }
        })
    })
    </script>
                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="PIS.html" class="md-footer__link md-footer__link--prev" aria-label="上一页: 信息安全原理">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                信息安全原理
              </div>
            </div>
          </a>
        
        
          
          <a href="CN.html" class="md-footer__link md-footer__link--next" aria-label="下一页: 计算机网络">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                计算机网络
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2024 <a href="https://github.com/CindyZhou2003/mymkdocs"  target="_blank" rel="noopener">Cindy</a>'本页面的全部内容在 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC BY-SA 4.0</a> 和 <a href="https://github.com/zTrix/sata-license">SATA</a> 协议之条款下提供，附加条款亦可能应用'
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/CindyZhou2003/mymkdocs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate", "navigation.indexes", "navigation.expand", "toc.follow", "navigation.top", "search.suggest", "navigation.footer", "navigation.tabs", "navigation.tracking", "navigation.instant.progress", "content.code.copy", "search.highlight", "search.share", "content.code.annotate", "navigation.tabs"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
        <script src="https://gcore.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js"></script>
      
        <script src="../js/katex.js"></script>
      
        <script src="../js/tablesort.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>